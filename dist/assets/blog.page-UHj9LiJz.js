import{r as e,U as t,j as s,F as a,L as r,a as l,n as o,c as i,z as n,p as c,P as d,b as m,f as x,A as u,m as h,d as g,e as p,N as y,u as b,g as f,h as j,E as v,S as N}from"./index-BK9O-y3K.js";import{u as w}from"./index-Ydo1i-SF.js";const k=()=>{const{userAuth:{access_token:i,username:n}}=e.useContext(t),{blog:c,setBlog:d,setCommentsWrapper:m}=e.useContext(ee),[x,u]=e.useState(!1),[h,g]=e.useState(!1),p=window.location.href;e.useEffect(()=>{(async()=>{if(i&&(null==c?void 0:c._id))try{const{data:t}=await l.get(`/check-like/${c._id}`);e.startTransition(()=>{d(e=>{var s;return{...e,activity:{...e.activity,isLikedByUser:t.is_liked,total_likes:t.total_likes??(null==(s=e.activity)?void 0:s.total_likes)??0}}})})}catch(t){}})()},[i,null==c?void 0:c._id,d]);if(!c||!c.title)return null;const{title:y,blog_id:b,_id:f,activity:j,authorId:v}=c,{total_comments:N=0}=j||{},{username:w}=(null==v?void 0:v.personal_info)||{};return s.jsxs(s.Fragment,{children:[s.jsx(a,{}),s.jsx("hr",{className:"border-dark-grey/50 my-3"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx("button",{onClick:async()=>{var t,s;if(!i)return void o.error("Please login to like this post");g(!0);const a=c.activity;e.startTransition(()=>{d(e=>{var t,s,a,r;return{...e,activity:{...e.activity,isLikedByUser:!(null==(t=e.activity)?void 0:t.isLikedByUser),total_likes:(null==(s=e.activity)?void 0:s.isLikedByUser)?((null==(r=e.activity)?void 0:r.total_likes)||0)-1:((null==(a=e.activity)?void 0:a.total_likes)||0)+1}}})});try{const{data:t}=await l.post("/like-post",{_id:c._id});e.startTransition(()=>{d(e=>({...e,activity:{...e.activity,isLikedByUser:t.liked_by_user,total_likes:t.total_likes}}))})}catch(r){e.startTransition(()=>{d(e=>({...e,activity:a}))}),o.error((null==(s=null==(t=r.response)?void 0:t.data)?void 0:s.error)||"Failed to update like status")}finally{g(!1)}},disabled:h,"aria-label":(null==j?void 0:j.isLikedByUser)?"Unlike post":"Like post",className:`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 ${(null==j?void 0:j.isLikedByUser)?"bg-red/10 text-red hover:bg-red/20 scale-110":"bg-grey/20 text-dark-grey hover:bg-grey/30"} ${h?"opacity-75 cursor-not-allowed":""}`,children:h?s.jsx("i",{className:"fi fi-rr-loading fi-spin text-xl"}):s.jsx("i",{className:`fi ${(null==j?void 0:j.isLikedByUser)?"fi-sr-heart":"fi-rr-heart"} text-xl transition-transform`})}),s.jsx("p",{className:"text-xl text-dark-grey",children:(null==j?void 0:j.total_likes)||0}),s.jsx("button",{onClick:()=>{m(e=>!e)},className:"w-10 h-10 rounded-full flex items-center justify-center bg-grey/20 hover:bg-grey/30 text-dark-grey transition-colors","aria-label":"View comments",children:s.jsx("i",{className:"fi fi-rr-comment-dots text-xl"})}),s.jsx("p",{className:"text-xl text-dark-grey",children:N})]}),s.jsxs("div",{className:"flex gap-4 items-center",children:[n===w&&s.jsxs(r,{to:`/editor/${b}`,className:"bg-black text-white px-4 py-2 rounded-full hover:bg-grey/90 transition-colors flex items-center gap-2","aria-label":"Edit post",children:[s.jsx("span",{children:"Edit"}),s.jsx("i",{className:"fi fi-rr-pencil text-sm"})]}),s.jsxs("div",{className:"relative group",children:[s.jsx("button",{onClick:()=>u(!x),className:"w-10 h-10 rounded-full flex items-center justify-center bg-grey/20 hover:bg-grey/30 text-dark-grey transition-colors","aria-label":"Share options",children:s.jsx("i",{className:"fi fi-sr-share text-lg"})}),x&&s.jsx("div",{className:"absolute right-0 bottom-full mb-2 w-44 bg-white dark:bg-gray-800 border border-grey/20 dark:border-gray-700 shadow-lg rounded-xl z-10 animate-fade-in",children:s.jsxs("ul",{className:"p-2 flex justify-around",children:[[{icon:"facebook",color:"#1877F2",url:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(p)}`},{icon:"twitter",color:"#1DA1F2",url:`https://x.com/intent/tweet?text=${encodeURIComponent(`Read "${y}" - ${p}`)}`},{icon:"whatsapp",color:"#25D366",url:`https://api.whatsapp.com/send?text=${encodeURIComponent(`Read "${y}" - ${p}`)}`}].map((e,t)=>s.jsx("li",{children:s.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"block p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",style:{color:e.color},children:s.jsx("i",{className:`fi fi-brands-${e.icon} text-xl`})})},t)),s.jsx("li",{children:s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(p),o.success("Link copied to clipboard!")},className:"block p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-gray-600 dark:text-gray-300",title:"Copy Link",children:s.jsx("i",{className:"fi fi-rr-copy-alt text-xl"})})})]})})]})]})]})]})},_=({url:e,caption:t})=>s.jsxs("div",{className:"my-8 flex flex-col items-center",children:[s.jsx("img",{src:e,alt:"Post_Image",className:"w-full max-w-4xl max-h-[500px] object-contain rounded-2xl shadow-2xl"}),t&&t.length>0&&s.jsx("p",{className:"mt-4 text-center text-2xl text-gray-600 italic",children:t})]}),C=({code:t})=>{const[a,r]=e.useState(!1);return s.jsxs("div",{className:"relative my-8",children:[s.jsx("pre",{className:"bg-black text-white p-4 rounded-2xl overflow-x-auto font-mono text-base shadow-lg",children:s.jsx("code",{children:t})}),s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t).then(()=>{r(!0),setTimeout(()=>r(!1),2e3)}).catch(e=>{})},className:"absolute top-3 right-3 bg-gray-200 hover:bg-gray-300 text-xs text-gray-700 py-1 px-3 rounded shadow",children:a?"Copied!":"Copy"})]})},L=({data:t})=>{const[a,r]=e.useState(!1);return s.jsxs("div",{className:"relative my-8 max-w-xl mx-auto border rounded-2xl p-8 bg-gradient-to-br from-blue-50 to-blue-100 shadow-2xl",children:[t.meta&&t.meta.image&&t.meta.image.url&&s.jsx("img",{src:t.meta.image.url,alt:t.meta.title||"Link preview",className:"w-full h-64 object-contain rounded-lg mb-6"}),s.jsx("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-700 hover:text-blue-800 text-2xl  mb-4",children:t.meta&&t.meta.title?t.meta.title:t.link}),t.meta&&t.meta.description&&s.jsx("p",{className:"mt-4 text-blue-800 text-xl",dangerouslySetInnerHTML:{__html:t.meta.description}}),s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t.link).then(()=>{r(!0),setTimeout(()=>r(!1),2e3)}).catch(e=>{})},className:"absolute top-3 right-3 bg-gray-200 hover:bg-gray-300 text-xs text-gray-700 py-1 px-3 rounded shadow",children:a?"Copied!":"Copy Link"})]})},S=({data:e})=>s.jsx("div",{className:"my-8",children:s.jsx("div",{className:"aspect-video w-full",children:s.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${M(e.url)}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"rounded-xl shadow-lg"})})}),M=e=>{const t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t&&11===t[2].length?t[2]:null},$=({block:e})=>{const{type:t,data:a}=e;switch(t){case"paragraph":return s.jsx("p",{className:"my-6 text-xl leading-relaxed text-gray-800",dangerouslySetInnerHTML:{__html:a.text}});case"header":return 1===a.level?s.jsx("h1",{className:"my-8 text-5xl font-extrabold text-gray-900",dangerouslySetInnerHTML:{__html:a.text}}):2===a.level?s.jsx("h2",{className:"my-7 text-4xl font-bold text-gray-900",dangerouslySetInnerHTML:{__html:a.text}}):3===a.level?s.jsx("h3",{className:"my-6 text-3xl font-semibold text-gray-900",dangerouslySetInnerHTML:{__html:a.text}}):null;case"image":return s.jsx(_,{url:a.file.url,caption:a.caption||""});case"code":return s.jsx(C,{code:a.code});case"table":return s.jsx("div",{className:"my-8 overflow-x-auto",children:s.jsx("table",{className:"min-w-full border-collapse border border-gray-300 shadow-lg",children:s.jsx("tbody",{className:"bg-white",children:a.content.map((e,t)=>s.jsx("tr",{className:"divide-x divide-gray-200",children:e.map((e,t)=>s.jsx("td",{className:"px-4 py-2 border border-gray-300 text-gray-700 text-lg",dangerouslySetInnerHTML:{__html:e}},t))},t))})})});case"quote":return s.jsxs("blockquote",{className:"my-8 border-l-4 border-gray-400 pl-8 italic text-gray-600 text-2xl",children:[s.jsx("p",{dangerouslySetInnerHTML:{__html:a.text}}),a.author&&s.jsxs("footer",{className:"mt-2 text-right text-xl font-medium text-gray-600",children:["â€” ",a.author]})]});case"list":return"ordered"===a.style?s.jsx("ol",{className:"my-8 list-decimal list-inside text-gray-800 text-xl",children:a.items.map((e,t)=>s.jsx("li",{className:"my-3",dangerouslySetInnerHTML:{__html:e}},t))}):s.jsx("ul",{className:"my-8 list-disc list-inside text-gray-800 text-xl",children:a.items.map((e,t)=>s.jsx("li",{className:"my-3",dangerouslySetInnerHTML:{__html:e}},t))});case"delimiter":return s.jsx("hr",{className:"my-8 border-t-2 border-gray-200"});case"checklist":return s.jsx("ul",{className:"my-8",children:a.items.map((e,t)=>s.jsxs("li",{className:"flex items-center space-x-4 my-3",children:[s.jsx("input",{type:"checkbox",checked:e.checked,readOnly:!0,className:"form-checkbox h-6 w-6 text-blue-600"}),s.jsx("span",{className:"text-gray-800 text-xl",dangerouslySetInnerHTML:{__html:e.text}})]},t))});case"warning":return s.jsxs("div",{className:"my-8 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 p-6 rounded-xl shadow-lg",role:"alert",children:[a.title&&s.jsx("p",{className:"font-bold text-2xl",children:a.title}),a.message&&s.jsx("p",{className:"mt-3 text-xl",dangerouslySetInnerHTML:{__html:a.message}})]});case"linkTool":return s.jsx(L,{data:a});case"youtubeEmbed":return s.jsx(S,{data:a});default:return s.jsxs("div",{className:"my-8 text-red-500",children:["Unsupported block type: ",t]})}},E=250,T=()=>s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})}),B=()=>s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),R=()=>s.jsxs("svg",{className:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),P=i.memo(({action:a,replyingTo:r=null,onPost:o,initialText:i="",autoFocus:d=!1,onCancel:m})=>{const[x,u]=e.useState(i),[h,g]=e.useState(!1),[p,y]=e.useState(i.length||0),[b,f]=e.useState(!1),{blog:j}=e.useContext(ee)||{},{userAuth:v}=e.useContext(t),{username:N,profile_img:w,fullname:k}=v||{},_=e.useRef(null);e.useEffect(()=>{u(i),y(i.length||0)},[i]),e.useEffect(()=>{d&&_.current&&_.current.focus()},[d]);const C=e.useCallback(e=>{const t=e.target.value;t.length<=E&&(u(t),y(t.length))},[]),L=e.useCallback(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),S())},[x]),S=e.useCallback(async()=>{var e,t;if(!N)return void n.error(`Please login to ${a.toLowerCase()}`);const s=c.sanitize(x.trim());if(!s)return void n.error(`Please write something to ${a.toLowerCase()}`);g(!0);const r=n.loading(("Save"===a?"Saving":"Posting")+"...");try{if("Save"===a||"Reply"===a)await o(s),u(""),"Save"===a&&m&&m();else if("Comment"===a){if(!(null==j?void 0:j._id))throw new Error("Blog data is not available.");await l.post("/add-comment",{blog_id:j._id,blog_author:j.authorId._id,comment:s}),u(""),y(0)}n.success(`${a}ed successfully!`,{id:r})}catch(i){const s=(null==(t=null==(e=i.response)?void 0:e.data)?void 0:t.error)||"ECONNABORTED"===i.code?"Request timeout.":`Failed to ${a.toLowerCase()}`;n.error(s,{id:r})}finally{g(!1)}},[a,j,x,o,m,N]),M=r?"Write your reply...":"Save"===a?"Edit your comment...":`Share your thoughts${N?`, ${N.split(" ")[0]}`:""}...`;return s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("img",{src:w||"/default-avatar.png",alt:"",className:"w-10 h-10 rounded-lg object-cover border border-gray-200 dark:border-gray-600",loading:"lazy",decoding:"async",onError:e=>{e.target.src="/default-avatar.png",e.target.onerror=null}})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"relative rounded-lg transition-colors duration-200 "+(b?"bg-white dark:bg-gray-800 ring-2 ring-blue-500/20 shadow-sm":"bg-gray-50 dark:bg-gray-800/50"),children:[s.jsx("textarea",{ref:_,value:x,onChange:C,onKeyDown:L,onFocus:()=>f(!0),onBlur:()=>f(!1),placeholder:M,disabled:h,autoFocus:d,className:"w-full p-3 pr-20 bg-transparent border-0 rounded-lg resize-none placeholder-gray-500 dark:placeholder-gray-400 text-gray-800 dark:text-gray-200 focus:outline-none text-sm leading-relaxed transition-colors",rows:"3",maxLength:E,"aria-label":r?"Reply comment field":"Comment field"}),p>175&&s.jsx("div",{className:"absolute right-3 top-3",children:s.jsxs("div",{className:"text-xs font-medium px-2 py-1 rounded "+(p>225?"text-red-500 bg-red-500/10":"text-gray-500 bg-gray-500/10"),children:[p,"/",E]})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsx("div",{children:m&&s.jsx("button",{onClick:m,className:"px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",disabled:h,children:"Cancel"})}),s.jsx("button",{onClick:S,disabled:h||!x.trim(),className:"px-4 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 "+(h||!x.trim()?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white shadow-sm hover:shadow"),children:h?s.jsxs(s.Fragment,{children:[s.jsx(R,{}),"Save"===a?"Saving...":"Posting..."]}):s.jsxs(s.Fragment,{children:["Save"===a?s.jsx(B,{}):s.jsx(T,{}),a]})})]})]})]})})});P.propTypes={action:d.string.isRequired,replyingTo:d.string,onPost:d.func,initialText:d.string,autoFocus:d.bool,onCancel:d.func},P.displayName="CommentField";const D=({filled:e=!1,className:t="w-4 h-4"})=>s.jsx("svg",{className:t,fill:e?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),z=({className:e="w-4 h-4"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),A=({className:e="w-4 h-4"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})}),I=({className:e="w-4 h-4"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),F=({className:e="w-4 h-4"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),U=({className:e="w-3 h-3"})=>s.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),H=({className:e="w-3 h-3"})=>s.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}),W=({className:e="w-4 h-4"})=>s.jsxs("svg",{className:`animate-spin ${e}`,fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),O=i.memo(({commentData:a,depth:r=0})=>{const[o,i]=e.useState(a),[c,d]=e.useState(a.isLiked),[u,h]=e.useState(a.upvotesCount),[g,p]=e.useState(!1),[y,b]=e.useState(!1),[f,j]=e.useState(!1),[v,N]=e.useState([]),[w,k]=e.useState(!1),[_,C]=e.useState(!1),[L,S]=e.useState(0),[M,$]=e.useState(!1),E=e.useRef(null);var T,B;T=E,B=()=>$(!1),e.useEffect(()=>{const e=e=>{T.current&&!T.current.contains(e.target)&&B()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[T,B]);const{_id:R,blog_id:q,blog_author:V,comment:K,commentedAt:G,commented_by:J,isDeleted:Q,repliesCount:X,edited:Y}=o,{personal_info:{fullname:Z,profile_img:ee,username:te}={}}=J||{},{userAuth:se}=e.useContext(t),{access_token:ae,_id:re}=se||{},{socket:le}=m(),oe=e.useMemo(()=>re===(null==J?void 0:J._id),[re,null==J?void 0:J._id]),ie=e.useMemo(()=>re===V,[re,V]),ne=e.useMemo(()=>oe||ie,[oe,ie]);e.useEffect(()=>{if(!le||!R)return;const e={commentLiked:e=>{e._id===R&&(h(e.upvotesCount),e.userId===re&&d(e.isLiked))},commentUpdated:e=>{e._id===R&&i(t=>({...t,comment:e.comment,edited:e.edited,editedAt:e.editedAt}))},newReply:e=>{e.parent===R&&f&&N(t=>[e,...t]),e.parent===R&&i(e=>({...e,repliesCount:(e.repliesCount||0)+1}))},commentDeleted:e=>{e._id===R&&i(e=>({...e,isDeleted:!0,comment:"[deleted]",commented_by:null}))}};return Object.entries(e).forEach(([e,t])=>{le.on(e,t)}),()=>{Object.entries(e).forEach(([e,t])=>{le.off(e,t)})}},[le,R,re,f]);const ce=e.useCallback(()=>{ae?p(e=>!e):n.error("Please login to reply")},[ae]),de=e.useCallback(async e=>{var t,s;if(!ae)return void n.error("Please login to reply");const a={_id:`temp-${Date.now()}`,blog_id:q,blog_author:V,comment:e,commented_by:{personal_info:{...se}},commentedAt:(new Date).toISOString(),isReply:!0,parent:R,upvotes:[],upvotesCount:0,isLiked:!1};N(e=>[a,...e]),p(!1);try{const{data:t}=await l.post("/reply-comment",{blog_id:q,blog_author:V,comment:e,parent_comment_id:R});N(e=>e.map(e=>e._id===a._id?t:e)),n.success("Reply posted!")}catch(r){N(e=>e.filter(e=>!e._id.startsWith("temp-"))),n.error((null==(s=null==(t=r.response)?void 0:t.data)?void 0:s.error)||"Failed to post reply")}},[R,ae,q,V,se]),me=e.useCallback(async()=>{if(!w){k(!0);try{const{data:e}=await l.get(`/get-comment-replies/${R}`,{params:{skip:5*L,limit:5,user_id:re}});e.length<5&&C(!0),N(t=>[...t,...e]),S(e=>e+1)}catch(e){n.error("Failed to load replies.")}finally{k(!1)}}},[R,L,re,w,5]),xe=e.useCallback(()=>{!f&&0===v.length&&X>0&&me(),j(e=>!e)},[f,v.length,X,me]),ue=e.useCallback(async()=>{if(!ae)return void n.error("Please login to like");const e=!c;d(e),h(t=>e?t+1:t-1);try{await l.post("/like-comment",{comment_id:R})}catch(t){d(!e),h(t=>e?t-1:t+1),n.error("Like failed. Please try again.")}},[R,ae,c]),he=e.useCallback(async e=>{var t,s;if(ae)try{await l.patch(`/edit-comment/${R}`,{comment:e}),b(!1),n.success("Comment updated!")}catch(a){throw n.error((null==(s=null==(t=a.response)?void 0:t.data)?void 0:s.error)||"Failed to edit"),a}else n.error("Please login to edit")},[R,ae]),ge=e.useCallback(async()=>{var e,t;if(!ae)return void n.error("Please login to delete");if($(!1),!window.confirm("Are you sure you want to delete this comment?"))return;const s=n.loading("Deleting...");try{await l.delete(`/delete-comment/${R}`),n.success("Comment deleted",{id:s})}catch(a){n.error((null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.error)||"Failed to delete",{id:s})}},[R,ae]);return r>5?null:Q?s.jsx("div",{className:"mb-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 dark:text-gray-500 text-sm",children:[s.jsx(F,{className:"w-4 h-4"}),"This comment has been deleted"]})}):s.jsx("div",{className:"mb-3 "+(r>0?"ml-3 pl-3 border-l border-gray-200 dark:border-gray-600":""),children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("img",{src:ee||"/default-avatar.png",alt:"",className:"w-8 h-8 rounded-lg object-cover border border-gray-200 dark:border-gray-600",loading:"lazy",decoding:"async",onError:e=>{e.target.src="/default-avatar.png",e.target.onerror=null}})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[y?s.jsx(P,{action:"Save",initialText:K,onPost:he,onCancel:()=>b(!1),autoFocus:!0}):s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-100 dark:border-gray-700 shadow-sm",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:Z||"Anonymous"}),te&&s.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs truncate",children:["@",te]}),s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-xs",children:x(G)||"Just now"}),Y&&s.jsxs("span",{className:"text-blue-500 dark:text-blue-400 text-xs flex items-center gap-1",children:[s.jsx(I,{className:"w-3 h-3"}),"edited"]})]})}),ne&&s.jsxs("div",{className:"relative",ref:E,children:[s.jsx("button",{onClick:()=>$(e=>!e),className:"p-1 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Comment actions",children:s.jsx(A,{})}),M&&s.jsxs("div",{className:"absolute top-full right-0 z-10 w-36 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-1",children:[oe&&s.jsxs("button",{onClick:()=>{b(!0),$(!1)},className:"w-full text-left flex items-center gap-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx(I,{className:"w-4 h-4"}),"Edit"]}),s.jsxs("button",{onClick:ge,className:"w-full text-left flex items-center gap-2 px-3 py-2 text-sm text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",children:[s.jsx(F,{className:"w-4 h-4"}),"Delete"]})]})]})]}),s.jsx("p",{className:"text-gray-800 dark:text-gray-200 text-sm mb-3 leading-relaxed",children:K}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:ue,disabled:!ae,className:`flex items-center gap-1 text-sm transition-colors ${c?"text-red-500":"text-gray-500 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400"} ${ae?"":"opacity-50 cursor-not-allowed"}`,children:[s.jsx(D,{filled:c}),s.jsx("span",{children:u||0})]}),s.jsxs("button",{onClick:ce,disabled:!ae,className:"flex items-center gap-1 text-sm transition-colors "+(ae?"text-gray-500 dark:text-gray-400 hover:text-blue-500 dark:hover:text-blue-400":"opacity-50 cursor-not-allowed text-gray-400"),children:[s.jsx(z,{}),s.jsx("span",{children:"Reply"})]})]})]}),g&&s.jsx("div",{className:"mt-3",children:s.jsx(P,{action:"Reply",replyingTo:R,onPost:de,autoFocus:!0,onCancel:()=>p(!1)})}),X>0&&s.jsx("div",{className:"mt-3",children:f?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:xe,className:"flex items-center gap-2 text-blue-500 dark:text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 text-sm font-medium mb-2",children:[s.jsx(H,{}),"Hide replies"]}),s.jsx("div",{className:"space-y-3",children:v.map(e=>s.jsx(O,{commentData:e,depth:r+1},e._id))}),!_&&X>v.length&&s.jsx("button",{onClick:me,disabled:w,className:"flex items-center gap-2 mt-2 text-sm "+(w?"text-gray-400":"text-blue-500 dark:text-blue-400 hover:text-blue-600 dark:hover:text-blue-300"),children:w?s.jsxs(s.Fragment,{children:[s.jsx(W,{}),"Loading..."]}):`Load ${X-v.length} more`})]}):s.jsxs("button",{onClick:xe,className:"flex items-center gap-2 text-blue-500 dark:text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 text-sm font-medium",children:[s.jsx(U,{}),`View ${X} ${X>1?"replies":"reply"}`]})})]})]})})});O.propTypes={commentData:d.object.isRequired,depth:d.number},O.displayName="CommentCard";const q=(t,s,a)=>{const[r,o]=e.useState({comments:[],loading:!1,error:null,page:0,hasMore:!0,totalCount:0}),i=e.useCallback(async(e=0,r=!1)=>{if(t){o(e=>({...e,loading:!0,error:null}));try{const i=await(async(e,t=0,s=5,a=null)=>{var r,o;try{if(!e||"string"!=typeof e)throw new Error("Invalid blogId provided");const o={blog_id:e,skip:t*s,limit:s,user_id:a,timestamp:Date.now()},i=await l.post("/get-post-comments",o,{timeout:1e4,validateStatus:e=>e<500});if(200!==i.status)throw new Error((null==(r=i.data)?void 0:r.error)||`Request failed with status ${i.status}`);return{comments:Array.isArray(i.data.comments)?i.data.comments.map(e=>({...e,isLiked:e.isLiked||!1})):[],total:Number(i.data.total)||0,hasMore:!1!==i.data.hasMore,page:Number(i.data.page)||t}}catch(i){if(401===(null==(o=i.response)?void 0:o.status))throw new Error("Please login to view comments");if("ECONNABORTED"===i.code)throw new Error("Request timeout. Please try again.");throw i}})(t,e,5,a);o(t=>({comments:r?i.comments:[...t.comments,...i.comments],loading:!1,page:e+1,hasMore:i.hasMore,totalCount:i.total,error:null})),r&&s&&s(e=>({...e,total_comments:i.total,total_parent_comments:i.total}))}catch(i){o(e=>({...e,loading:!1,error:i.message||"Failed to load comments"}))}}},[t,s,a,5]),n=e.useCallback(e=>{o(e)},[]);return e.useEffect(()=>{t&&i(0,!0)},[t,i]),{...r,fetchComments:i,setCommentsState:n}},V=()=>s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),K=()=>s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),G=()=>s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),J=i.memo(()=>{const{blog:a,commentsWrapper:r,setCommentsWrapper:l,updateBlogActivity:o}=e.useContext(ee),{userAuth:i}=e.useContext(t),{_id:n}=i||{},{socket:c}=m(),d=null==a?void 0:a._id,x=(null==a?void 0:a.title)||"",{comments:b,loading:f,error:j,page:v,hasMore:N,totalCount:k,fetchComments:_,setCommentsState:C}=q(d,o,n);e.useEffect(()=>{c&&d&&(c.emit("joinCommentRoom",{blog_id:d}),c.emit("joinPostRoom",{blog_id:d}))},[c,d]),e.useEffect(()=>{if(!c||!d)return;const e=e=>{e.blog_id!==d||e.isReply||(C(t=>({...t,comments:[e,...t.comments],totalCount:t.totalCount+1})),o(e=>({...e,total_comments:(e.total_comments||0)+1,total_parent_comments:(e.total_parent_comments||0)+1})))},t=e=>{e.blog_id===d&&e.parent&&(C(t=>({...t,comments:t.comments.map(t=>t._id===e.parent?{...t,repliesCount:(t.repliesCount||0)+1}:t),totalCount:t.totalCount+1})),o(e=>({...e,total_comments:(e.total_comments||0)+1})))},s=e=>{e.blog_id===d&&(C(t=>{const s=t.comments.some(t=>t._id===e._id);return{...t,comments:t.comments.map(t=>t._id===e._id?{...t,isDeleted:!0,comment:"[deleted]",commented_by:null}:t._id===e.parent?{...t,repliesCount:Math.max(0,(t.repliesCount||1)-1)}:t),totalCount:Math.max(0,t.totalCount-1),total_parent_comments:s?Math.max(0,t.totalCount-1):t.totalCount}}),o(e=>({...e,total_comments:Math.max(0,(e.total_comments||1)-1),total_parent_comments:Math.max(0,(e.total_parent_comments||1)-1)})))};return c.on("newComment",e),c.on("newReply",t),c.on("commentDeleted",s),()=>{c.off("newComment",e),c.off("newReply",t),c.off("commentDeleted",s)}},[c,d,C,o]);const{ref:L,inView:S}=w({threshold:0,triggerOnce:!1}),M=e.useCallback(()=>{!f&&N&&_(v)},[_,f,N,v]);e.useEffect(()=>{S&&M()},[S,M]);const $=e.useMemo(()=>s.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-500 rounded-lg text-white",children:s.jsx(K,{})}),s.jsxs("div",{children:[s.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white",children:["Comments (",k,")"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-[200px]",children:x})]})]}),s.jsx("button",{onClick:()=>l(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Close comments",children:s.jsx(V,{})})]})}),[k,x,l]);return s.jsx(u,{children:r&&s.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex justify-end bg-black/50 backdrop-blur-sm",onClick:()=>l(!1),children:s.jsxs(h.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"w-full max-w-md h-full bg-white dark:bg-gray-900 shadow-2xl flex flex-col",onClick:e=>e.stopPropagation(),children:[$,s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsx(P,{action:"comment"}),j&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center text-red-500",children:[s.jsx(G,{}),s.jsx("p",{className:"mt-2 text-sm",children:j}),s.jsx("button",{onClick:()=>_(0,!0),className:"mt-3 text-xs font-medium underline hover:text-red-600",children:"Try Again"})]}),s.jsx("div",{className:"space-y-4",children:b.map(e=>s.jsx(g,{children:s.jsx(O,{index:0,leftVal:0,commentData:e})},e._id))}),f&&s.jsx("div",{className:"flex justify-center py-4",children:s.jsx(p,{})}),!f&&!N&&b.length>0&&s.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"End of comments"}),!f&&0===b.length&&!j&&s.jsx(y,{message:"No comments yet. Be the first to share your thoughts!"}),s.jsx("div",{ref:L,className:"h-4"})]})})]})})})}),Q=({className:e})=>s.jsx("div",{className:`bg-gray-200 dark:bg-gray-700 rounded-md animate-pulse ${e}`}),X=()=>s.jsxs("div",{className:"max-w-[900px] center py-10 max-lg:px-[5vw]",children:[s.jsx(Q,{className:"aspect-video w-full"}),s.jsx(Q,{className:"h-12 w-3/4 mt-12"}),s.jsx(Q,{className:"h-12 w-1/2 mt-4"}),s.jsxs("div",{className:"flex flex-wrap justify-between items-center my-8 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx(Q,{className:"w-12 h-12 rounded-full"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(Q,{className:"h-5 w-32"}),s.jsx(Q,{className:"h-4 w-24"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Q,{className:"h-5 w-24"}),s.jsx(Q,{className:"h-5 w-20"})]})]}),s.jsx("hr",{className:"border-dark-grey/50 my-3"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx(Q,{className:"w-10 h-10 rounded-full"}),s.jsx(Q,{className:"h-6 w-8"}),s.jsx(Q,{className:"w-10 h-10 rounded-full"}),s.jsx(Q,{className:"h-6 w-8"})]}),s.jsx("div",{className:"flex gap-4 items-center",children:s.jsx(Q,{className:"w-10 h-10 rounded-full"})})]}),s.jsx("hr",{className:"border-dark-grey/50 my-3"}),s.jsxs("div",{className:"my-12 flex flex-col gap-4",children:[s.jsx(Q,{className:"h-6 w-full"}),s.jsx(Q,{className:"h-6 w-full"}),s.jsx(Q,{className:"h-6 w-11/12"}),s.jsx("br",{}),s.jsx(Q,{className:"h-6 w-full"}),s.jsx(Q,{className:"h-6 w-10/12"}),s.jsx("br",{}),s.jsx(Q,{className:"h-48 w-full"})," ",s.jsx("br",{}),s.jsx(Q,{className:"h-6 w-full"}),s.jsx(Q,{className:"h-6 w-11/12"})]})]});class Y extends e.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"ðŸ˜ž"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Something went wrong"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"We're sorry for the inconvenience. Please try refreshing the page or return to the homepage."}),!1,s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[s.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:"Refresh Page"}),s.jsx(r,{to:"/",className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-center",children:"Go to Homepage"})]})]})}):this.props.children}}const Z=({src:t,placeholder:a,alt:r,className:l="",style:o={},transitionDuration:i=.3,blurAmount:n="8px"})=>{const[c,d]=e.useState(!1),[m,x]=e.useState(a);return e.useEffect(()=>{const e=new Image;return e.src=t,e.onload=()=>{x(t),d(!0)},e.onerror=()=>{x(a||"/placeholder-image.jpg"),d(!0)},()=>{e.onload=null,e.onerror=null}},[t,a]),s.jsxs("div",{className:`relative overflow-hidden ${l}`,style:o,children:[s.jsx("img",{src:a,alt:r,className:"absolute inset-0 w-full h-full object-cover transition-opacity duration-500 "+(c?"opacity-0":"opacity-100"),style:{filter:`blur(${n})`,transform:"scale(1.1)"}}),s.jsx(h.img,{src:m,alt:r,className:"w-full h-full object-cover",initial:{opacity:0},animate:{opacity:c?1:0},transition:{duration:i},loading:"lazy"}),!c&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})})]})},ee=e.createContext({}),te=i.memo(()=>{var t,o,i,n;const{blog_id:c}=b(),d=f(),{socket:x}=m(),[u,h]=e.useState({title:"",des:"",content:[],banner:"",authorId:{},tags:[],activity:{},publishedAt:"",readingTime:5}),[p,y]=e.useState([]),[w,_]=e.useState(!0),[C,L]=e.useState(null),[S,M]=e.useState(!1),{title:E,des:T,content:B,banner:R,authorId:{personal_info:{fullname:P,username:D,profile_img:z}={}}={},publishedAt:A,tags:I=[],readingTime:F}=u,U=e.useCallback(async()=>{var e,t,s,a;try{_(!0),L(null);const{data:{blog:t}}=await l.post("/get-post",{blog_id:c}),[s,a]=await Promise.allSettled([j(t._id),(null==(e=t.tags)?void 0:e.length)?l.post("/similar/posts",{tag:t.tags[0],blog_id:c}):Promise.resolve({data:[]})]),r="fulfilled"===s.status?s.value.comments:[],o="fulfilled"===s.status?s.value.total:0;h({...t,comments:r,activity:{...t.activity,total_comments:o,total_parent_comments:o,isLikedByUser:t.activity.isLikedByUser||!1}}),"fulfilled"===a.status&&a.value.data&&y(a.value.data)}catch(r){const e=(null==(s=null==(t=r.response)?void 0:t.data)?void 0:s.error)||r.message||"Failed to load blog post";L(e),404===(null==(a=r.response)?void 0:a.status)&&d("/404",{replace:!0})}finally{_(!1)}},[c,d]),H=e.useCallback(e=>{h(t=>({...t,activity:{...t.activity,...e}}))},[]);return e.useEffect(()=>{U()},[U]),e.useEffect(()=>{if(!x||!c)return;x.emit("joinPostRoom",{blog_id:c});const e=e=>{e.blog_id===c&&H({total_likes:e.total_likes})},t=e=>{e.blog_id===c&&(toast.error("This post has been deleted by the author."),d("/"))};return x.on("likeUpdate",e),x.on("postDeleted",t),()=>{x.off("likeUpdate",e),x.off("postDeleted",t)}},[x,c,H,d]),w?s.jsx(X,{}):C?s.jsx("div",{className:"max-w-[900px] center py-10 max-lg:px-[5vw]",children:s.jsx(v,{message:C,onRetry:U})}):s.jsxs(Y,{children:[s.jsx(N,{title:E,description:T||`${E} - A post by ${P}`,image:R,type:"article",schema:{"@context":"https://schema.org","@type":"BlogPosting",headline:E,description:T,image:R,author:{"@type":"Person",name:P},datePublished:A,timeRequired:`PT${F}M`,wordCount:(null==(o=null==(t=B[0])?void 0:t.blocks)?void 0:o.reduce((e,t)=>{var s,a;return e+((null==(a=null==(s=t.data)?void 0:s.text)?void 0:a.split(" ").length)||0)},0))||0}}),s.jsx(g,{children:s.jsxs(ee.Provider,{value:{blog:u,setBlog:h,updateBlogActivity:H,commentsWrapper:S,setCommentsWrapper:M},children:[s.jsx(a,{}),S&&s.jsx(J,{}),s.jsxs("article",{className:"max-w-[900px] center py-10 max-lg:px-[5vw]",children:[s.jsxs("header",{className:"mb-12",children:[s.jsx(Z,{src:R,placeholder:"/placeholder-blog.jpg",className:"aspect-video rounded-xl shadow-lg w-full object-cover",alt:E}),s.jsx("div",{className:"mt-12",children:s.jsx("h1",{className:"text-4xl font-bold mb-4 text-gradient bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:E})}),s.jsxs("div",{className:"flex flex-wrap justify-between items-center my-8 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("img",{className:"w-12 h-12 rounded-full object-cover border-2 border-white shadow-md",src:z,alt:P,loading:"lazy"}),s.jsx("div",{children:s.jsxs("p",{className:"font-medium capitalize",children:[P,s.jsx("br",{}),s.jsxs(r,{className:"text-twitter hover:underline text-sm font-normal",to:`/user/${D}`,children:["@",D]})]})})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsxs("span",{className:"text-dark-gray opacity-75 flex items-center gap-1",children:[s.jsx("i",{className:"fi fi-rr-calendar-clock text-base"}),(O=A,new Date(O).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))]}),s.jsxs("span",{className:"text-dark-gray opacity-75 flex items-center gap-1",children:[s.jsx("i",{className:"fi fi-rr-book-open-cover text-base"}),(W=F||5,`${W} min read`)]})]})]}),s.jsx(k,{})]}),s.jsx("section",{className:"my-12 font-gelasio blog-page-content prose prose-lg max-w-none dark:prose-invert prose-headings:font-bold prose-a:text-accent hover:prose-a:text-accent-dark prose-img:rounded-xl prose-img:shadow-md",children:null==(n=null==(i=B[0])?void 0:i.blocks)?void 0:n.map((e,t)=>s.jsx("div",{className:"my-4 md:my-8",children:s.jsx($,{block:e})},t))}),s.jsxs("footer",{className:"mt-16",children:[s.jsx(k,{}),I.length>0&&s.jsxs("div",{className:"mt-8",children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:I.map((e,t)=>s.jsxs("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-full text-sm text-gray-700 dark:text-gray-300",children:["#",e]},t))})]}),p.length>0&&s.jsxs("div",{className:"mt-12",children:[s.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Similar Posts"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.map(e=>s.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[s.jsx("h4",{className:"font-semibold text-lg mb-2",children:e.title}),s.jsx("p",{className:"text-gray-600 text-sm mb-2",children:e.des}),s.jsx(r,{to:`/blog/${e.blog_id}`,className:"text-blue-600 hover:underline text-sm",children:"Read more"})]},e._id))})]})]})]})]})})]});var W,O});export{te as default,ee as postContext};
