import{j as e}from"./vendor-markdown-DVKDwQVh.js";import{h as t,r as s,L as a}from"./vendor-react-B32pNUrn.js";import{U as r,a as l,S as i}from"./index-D1ni5E-J.js";import{F as o,a as n,b as c,c as d,d as m,e as x}from"./index-CIJS504a.js";import{m as p,A as g}from"./vendor-ui-BqXYh4xT.js";import"./vendor-socket-CUkmNz_4.js";import"./iconBase-D8qOIRNa.js";const h=()=>e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-300 rounded w-3/4 mx-auto"}),e.jsx("div",{className:"h-64 bg-gray-300 rounded-lg mx-auto"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-1/2 mx-auto"})]}),u=[{key:"facebook",Icon:o,color:"text-blue-600"},{key:"twitter",Icon:n,color:"text-blue-400"},{key:"instagram",Icon:c,color:"text-pink-500"},{key:"linkedin",Icon:d,color:"text-blue-700"},{key:"github",Icon:m,color:"text-gray-800"},{key:"website",Icon:x,color:"text-green-600"}],f=()=>{const{id:o}=t(),{userAuth:n}=s.useContext(r),c=s.useMemo(()=>null==n?void 0:n.id,[n]),[d,m]=s.useState(null),[x,f]=s.useState(!0),[j,b]=s.useState("posts"),[y,N]=s.useState([]),[v,w]=s.useState([]),[k,S]=s.useState(!0),[_,I]=s.useState(1),P=s.useRef(),C=s.useCallback(e=>{x||(P.current&&P.current.disconnect(),P.current=new IntersectionObserver(e=>{e[0].isIntersecting&&"posts"===j&&k&&I(e=>e+1)}),e&&P.current.observe(e))},[x,k,j]);if(s.useEffect(()=>{f(!0),l.post("/get-profile",{username:o}).then(({data:e})=>{e&&(e._id||e.id)?(m(e),N(e.blogs||[]),w(e.stories||[]),S((e.blogs||[]).length>=8)):m({notFound:!0})}).catch(()=>m({notFound:!0})).finally(()=>f(!1))},[o]),s.useEffect(()=>{1!==_&&l.get("/get-profile-posts",{params:{user:o,page:_,limit:8}}).then(({data:e})=>{e.length>0?(N(t=>[...t,...e]),e.length<8&&S(!1)):S(!1)}).catch(()=>S(!1))},[_,o]),x)return e.jsx("div",{className:"mt-20",children:e.jsx(h,{})});if(d.notFound)return e.jsx("p",{className:"text-center text-xl text-gray-500 mt-20",children:"User not found."});const{personal_info:{fullname:F,username:$,profile_img:z,bio:A},account_info:{totalPosts:E,total_reads:U},social_links:D,joinedAt:L}=d;return e.jsxs(e.Fragment,{children:[e.jsx(i,{title:`${F} (@${$}) â€¢ Profile`,description:A||`${F}'s profile on OurPlatform`,image:z||"/default-avatar.png",type:"profile",schema:{"@context":"https://schema.org","@type":"Person",name:F,url:window.location.href,description:A,image:z}}),e.jsxs(p.div,{className:"max-w-3xl mx-auto p-6 bg-white bg-opacity-60 backdrop-blur-md rounded-2xl shadow-xl mt-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[e.jsx("img",{src:z||"/default-avatar.png",alt:F,loading:"lazy",className:"w-32 h-32 rounded-full border-4 border-gradient-to-r from-indigo-400 to-purple-400 object-cover"}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-gray-900",children:F}),e.jsxs("p",{className:"text-lg text-gray-600",children:["@",$]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Joined ",new Date(L).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex justify-around mt-6 py-4 border-t border-b border-gray-200",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:E}),e.jsx("p",{className:"text-sm text-gray-500",children:"Posts"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:U}),e.jsx("p",{className:"text-sm text-gray-500",children:"Reads"})]})]}),String(c)===String(d._id||d.id)&&e.jsx("div",{className:"flex justify-center my-4",children:e.jsx(a,{to:"/settings/edit-profile",className:"px-6 py-2 uppercase text-sm tracking-wide bg-gradient-to-br from-blue-900 to-indigo-900 text-white rounded-full shadow hover:scale-105 transform transition",children:"Edit Profile"})}),e.jsxs(p.div,{className:"mt-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx("hr",{className:"border-black w-50 mt-4 mb-2 opacity-[20%] "}),e.jsx("p",{className:"text-gray-700 text-center mt-2",children:A||"No bio  available."}),e.jsx("hr",{className:"border-black w-50 mt-4 mb-2 opacity-[20%] "})]}),e.jsx("div",{className:"flex justify-center space-x-4 mt-6",children:u.map(({key:t,Icon:s,color:a})=>D[t]?e.jsx("a",{href:D[t],target:"_blank",rel:"noopener noreferrer","aria-label":t,className:`p-3 bg-white rounded-full shadow-lg transform hover:scale-110 transition ${a}`,children:e.jsx(s,{size:20})},t):null)}),e.jsxs("div",{className:"mt-8",children:[e.jsx("div",{className:"flex justify-center space-x-8 border-b",children:["posts","stories"].map(t=>e.jsx("button",{onClick:()=>b(t),className:"pb-2 "+(j===t?"border-b-4 border-gradient-to-r from-indigo-400 to-purple-400 font-semibold text-gray-900":"text-gray-500 hover:text-gray-700"),children:t.charAt(0).toUpperCase()+t.slice(1)},t))}),e.jsx(g,{mode:"wait",children:"posts"===j?e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:[y.map((t,s)=>{const r=y.length===s+1;return e.jsxs(a,{to:`/post/${t.blog_id}`,ref:r?C:null,className:"bg-white  rounded-2xl overflow-hidden shadow-lg transform hover:scale-105 transition",children:[e.jsx("div",{className:"relative h-48 w-full",children:e.jsx("img",{src:t.banner||"/post-placeholder.jpg",alt:t.title,loading:"lazy",className:"object-cover w-full h-full"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:" line-clamp-1  mb-2",children:t.title}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2",children:t.des||"No description available."})]})]},t.blog_id)}),k&&e.jsx("div",{className:"col-span-full flex justify-center mt-4",children:e.jsx(h,{})})]},"posts"):e.jsx(p.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:v.length>0?v.map(t=>e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-lg transform hover:scale-105 transition cursor-pointer",onClick:()=>window.alert("Story modal open logic"),children:[e.jsx("div",{className:"relative h-48 w-full",children:e.jsx("img",{src:t.banner||"/story-placeholder.jpg",alt:t.title,loading:"lazy",className:"object-cover w-full h-full"})}),e.jsx("div",{className:"p-4",children:e.jsx("h4",{className:" font-bold text-gray-900",children:t.title})})]},t.story_id)):e.jsx("p",{className:"col-span-full text-center text-gray-500",children:"No stories available."})},"stories")})]})]})]})};export{f as default};
