import{j as e}from"./vendor-markdown-DVKDwQVh.js";import{r,L as a}from"./vendor-react-B32pNUrn.js";import{V as s}from"./VoteButtons-CcfIBH04.js";import{u as t,g as o}from"./index-D1ni5E-J.js";import{m as i,V as n}from"./vendor-ui-BqXYh4xT.js";const d=r.memo(({post:d})=>{var l;if(!d||!d._id)return null;const{socket:c}=t(),[m,x]=r.useState(d);r.useEffect(()=>{x(d)},[d]),r.useEffect(()=>{if(!c||!d._id)return;const e=e=>{e._id===d._id&&x(r=>({...r,...e}))};return c.on("postUpdated",e),()=>c.off("postUpdated",e)},[c,d._id]);const{author:g,title:u,content:b,community:h,createdAt:p,_id:f,postType:j,image:y,url:v,commentCount:k}=m;return e.jsxs(i.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"flex bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden hover:border-gray-300 dark:hover:border-gray-600 transition-colors mb-4",children:[e.jsx("div",{className:"w-12 bg-gray-50 dark:bg-gray-800/50 border-r border-gray-100 dark:border-gray-700 pt-2",children:e.jsx(s,{item:m})}),e.jsxs("div",{className:"flex-1 p-3 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[h&&e.jsxs(a,{to:`/readit/c/${h.name}`,className:"font-bold text-black dark:text-white hover:underline flex items-center gap-1",children:[h.icon&&e.jsx("img",{src:h.icon,className:"w-4 h-4 rounded-full",alt:""}),"c/",h.name]}),e.jsx("span",{children:"•"}),e.jsxs("span",{className:"hover:underline",children:["u/",null==(l=null==g?void 0:g.personal_info)?void 0:l.username]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:o(p)})]}),e.jsxs(a,{to:`/readit/post/${f}`,className:"block group",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white leading-snug group-hover:text-blue-500 transition-colors",children:u}),"image"===j&&y?e.jsx("div",{className:"mt-3 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-black max-h-[500px] flex justify-center",children:e.jsx("img",{src:y,alt:u,className:"max-h-[500px] object-contain",loading:"lazy"})}):"link"===j&&v?e.jsxs("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"mt-3 flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg text-blue-600 dark:text-blue-400 hover:underline",children:[e.jsx("i",{className:"fi fi-rr-link","aria-hidden":"true"}),e.jsx("span",{className:"truncate",children:v})]}):e.jsx("p",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300 line-clamp-3",children:b})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs font-bold text-gray-500",children:[e.jsxs(a,{to:`/readit/post/${f}`,className:"flex items-center gap-1 hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-md transition-colors",children:[e.jsx("i",{className:"fi fi-rr-comment-alt","aria-hidden":"true"})," ",k," Comments"]}),e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/readit/post/${f}`),n.success("Link copied!")},className:"flex items-center gap-1 hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-md transition-colors",children:[e.jsx("i",{className:"fi fi-rr-share","aria-hidden":"true"})," Share"]})]})]})]})});export{d as R};
