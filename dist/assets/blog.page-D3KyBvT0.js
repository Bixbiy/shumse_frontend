import{r as e,j as t,F as s,L as a,n as r,c as l,z as o,p as i,g as n,u as c,q as d}from"./vendor-react-CvqM9zc9.js";import{U as m,a as x,u,f as h,A as g,L as p,N as y,b,E as f,S as j}from"./index-kVKNAyzJ.js";import{L as v,P as N}from"./vendor-misc-BFmcx_8c.js";import{A as w,m as k}from"./vendor-animation-BFb6eZlp.js";import"./vendor-socket-DIFBDcho.js";import"./vendor-utils-DnwaQ9mb.js";const _=()=>{const{userAuth:{access_token:l,username:o}}=e.useContext(m),{blog:i,setBlog:n,setCommentsWrapper:c}=e.useContext(te),[d,u]=e.useState(!1),[h,g]=e.useState(!1),p=window.location.href;e.useEffect(()=>{(async()=>{if(l&&(null==i?void 0:i._id))try{const{data:t}=await x.get(`/check-like/${i._id}`);e.startTransition(()=>{n(e=>{var s;return{...e,activity:{...e.activity,isLikedByUser:t.is_liked,total_likes:t.total_likes??(null==(s=e.activity)?void 0:s.total_likes)??0}}})})}catch(t){}})()},[l,null==i?void 0:i._id,n]);if(!i||!i.title)return null;const{title:y,blog_id:b,_id:f,activity:j,authorId:v}=i,{total_comments:N=0}=j||{},{username:w}=(null==v?void 0:v.personal_info)||{};return t.jsxs(t.Fragment,{children:[t.jsx(s,{}),t.jsx("hr",{className:"border-dark-grey/50 my-3"}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex gap-3 items-center",children:[t.jsx("button",{onClick:async()=>{var t,s;if(!l)return void r.error("Please login to like this post");g(!0);const a=i.activity;e.startTransition(()=>{n(e=>{var t,s,a,r;return{...e,activity:{...e.activity,isLikedByUser:!(null==(t=e.activity)?void 0:t.isLikedByUser),total_likes:(null==(s=e.activity)?void 0:s.isLikedByUser)?((null==(r=e.activity)?void 0:r.total_likes)||0)-1:((null==(a=e.activity)?void 0:a.total_likes)||0)+1}}})});try{const{data:t}=await x.post("/like-post",{_id:i._id});e.startTransition(()=>{n(e=>({...e,activity:{...e.activity,isLikedByUser:t.liked_by_user,total_likes:t.total_likes}}))})}catch(o){e.startTransition(()=>{n(e=>({...e,activity:a}))}),r.error((null==(s=null==(t=o.response)?void 0:t.data)?void 0:s.error)||"Failed to update like status")}finally{g(!1)}},disabled:h,"aria-label":(null==j?void 0:j.isLikedByUser)?"Unlike post":"Like post",className:`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 ${(null==j?void 0:j.isLikedByUser)?"bg-red/10 text-red hover:bg-red/20 scale-110":"bg-grey/20 text-dark-grey hover:bg-grey/30"} ${h?"opacity-75 cursor-not-allowed":""}`,children:h?t.jsx("i",{className:"fi fi-rr-loading fi-spin text-xl"}):t.jsx("i",{className:`fi ${(null==j?void 0:j.isLikedByUser)?"fi-sr-heart":"fi-rr-heart"} text-xl transition-transform`})}),t.jsx("p",{className:"text-xl text-dark-grey",children:(null==j?void 0:j.total_likes)||0}),t.jsx("button",{onClick:()=>{c(e=>!e)},className:"w-10 h-10 rounded-full flex items-center justify-center bg-grey/20 hover:bg-grey/30 text-dark-grey transition-colors","aria-label":"View comments",children:t.jsx("i",{className:"fi fi-rr-comment-dots text-xl"})}),t.jsx("p",{className:"text-xl text-dark-grey",children:N})]}),t.jsxs("div",{className:"flex gap-4 items-center",children:[o===w&&t.jsxs(a,{to:`/editor/${b}`,className:"bg-black text-white px-4 py-2 rounded-full hover:bg-grey/90 transition-colors flex items-center gap-2","aria-label":"Edit post",children:[t.jsx("span",{children:"Edit"}),t.jsx("i",{className:"fi fi-rr-pencil text-sm"})]}),t.jsxs("div",{className:"relative group",children:[t.jsx("button",{onClick:()=>u(!d),className:"w-10 h-10 rounded-full flex items-center justify-center bg-grey/20 hover:bg-grey/30 text-dark-grey transition-colors","aria-label":"Share options",children:t.jsx("i",{className:"fi fi-sr-share text-lg"})}),d&&t.jsx("div",{className:"absolute right-0 bottom-full mb-2 w-44 bg-white dark:bg-gray-800 border border-grey/20 dark:border-gray-700 shadow-lg rounded-xl z-10 animate-fade-in",children:t.jsxs("ul",{className:"p-2 flex justify-around",children:[[{icon:"facebook",color:"#1877F2",url:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(p)}`},{icon:"twitter",color:"#1DA1F2",url:`https://x.com/intent/tweet?text=${encodeURIComponent(`Read "${y}" - ${p}`)}`},{icon:"whatsapp",color:"#25D366",url:`https://api.whatsapp.com/send?text=${encodeURIComponent(`Read "${y}" - ${p}`)}`}].map((e,s)=>t.jsx("li",{children:t.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"block p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",style:{color:e.color},children:t.jsx("i",{className:`fi fi-brands-${e.icon} text-xl`})})},s)),t.jsx("li",{children:t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(p),r.success("Link copied to clipboard!")},className:"block p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-gray-600 dark:text-gray-300",title:"Copy Link",children:t.jsx("i",{className:"fi fi-rr-copy-alt text-xl"})})})]})})]})]})]})]})},C=({url:e,caption:s})=>t.jsxs("div",{className:"my-8 flex flex-col items-center",children:[t.jsx("img",{src:e,alt:"Post_Image",className:"w-full max-w-4xl max-h-[500px] object-contain rounded-2xl shadow-2xl"}),s&&s.length>0&&t.jsx("p",{className:"mt-4 text-center text-2xl text-gray-600 italic",children:s})]}),L=({code:s})=>{const[a,r]=e.useState(!1);return t.jsxs("div",{className:"relative my-8",children:[t.jsx("pre",{className:"bg-black text-white p-4 rounded-2xl overflow-x-auto font-mono text-base shadow-lg",children:t.jsx("code",{children:s})}),t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(s).then(()=>{r(!0),setTimeout(()=>r(!1),2e3)}).catch(e=>{})},className:"absolute top-3 right-3 bg-gray-200 hover:bg-gray-300 text-xs text-gray-700 py-1 px-3 rounded shadow",children:a?"Copied!":"Copy"})]})},S=({data:s})=>{const[a,r]=e.useState(!1);return t.jsxs("div",{className:"relative my-8 max-w-xl mx-auto border rounded-2xl p-8 bg-gradient-to-br from-blue-50 to-blue-100 shadow-2xl",children:[s.meta&&s.meta.image&&s.meta.image.url&&t.jsx("img",{src:s.meta.image.url,alt:s.meta.title||"Link preview",className:"w-full h-64 object-contain rounded-lg mb-6"}),t.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-700 hover:text-blue-800 text-2xl  mb-4",children:s.meta&&s.meta.title?s.meta.title:s.link}),s.meta&&s.meta.description&&t.jsx("p",{className:"mt-4 text-blue-800 text-xl",dangerouslySetInnerHTML:{__html:s.meta.description}}),t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(s.link).then(()=>{r(!0),setTimeout(()=>r(!1),2e3)}).catch(e=>{})},className:"absolute top-3 right-3 bg-gray-200 hover:bg-gray-300 text-xs text-gray-700 py-1 px-3 rounded shadow",children:a?"Copied!":"Copy Link"})]})},M=({data:e})=>t.jsx("div",{className:"my-8",children:t.jsx("div",{className:"aspect-video w-full",children:t.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${$(e.url)}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"rounded-xl shadow-lg"})})}),$=e=>{const t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t&&11===t[2].length?t[2]:null},E=({block:e})=>{const{type:s,data:a}=e;switch(s){case"paragraph":return t.jsx("p",{className:"my-6 text-xl leading-relaxed text-gray-800",dangerouslySetInnerHTML:{__html:a.text}});case"header":return 1===a.level?t.jsx("h1",{className:"my-8 text-5xl font-extrabold text-gray-900",dangerouslySetInnerHTML:{__html:a.text}}):2===a.level?t.jsx("h2",{className:"my-7 text-4xl font-bold text-gray-900",dangerouslySetInnerHTML:{__html:a.text}}):3===a.level?t.jsx("h3",{className:"my-6 text-3xl font-semibold text-gray-900",dangerouslySetInnerHTML:{__html:a.text}}):null;case"image":return t.jsx(C,{url:a.file.url,caption:a.caption||""});case"code":return t.jsx(L,{code:a.code});case"table":return t.jsx("div",{className:"my-8 overflow-x-auto",children:t.jsx("table",{className:"min-w-full border-collapse border border-gray-300 shadow-lg",children:t.jsx("tbody",{className:"bg-white",children:a.content.map((e,s)=>t.jsx("tr",{className:"divide-x divide-gray-200",children:e.map((e,s)=>t.jsx("td",{className:"px-4 py-2 border border-gray-300 text-gray-700 text-lg",dangerouslySetInnerHTML:{__html:e}},s))},s))})})});case"quote":return t.jsxs("blockquote",{className:"my-8 border-l-4 border-gray-400 pl-8 italic text-gray-600 text-2xl",children:[t.jsx("p",{dangerouslySetInnerHTML:{__html:a.text}}),a.author&&t.jsxs("footer",{className:"mt-2 text-right text-xl font-medium text-gray-600",children:["â€” ",a.author]})]});case"list":return"ordered"===a.style?t.jsx("ol",{className:"my-8 list-decimal list-inside text-gray-800 text-xl",children:a.items.map((e,s)=>t.jsx("li",{className:"my-3",dangerouslySetInnerHTML:{__html:e}},s))}):t.jsx("ul",{className:"my-8 list-disc list-inside text-gray-800 text-xl",children:a.items.map((e,s)=>t.jsx("li",{className:"my-3",dangerouslySetInnerHTML:{__html:e}},s))});case"delimiter":return t.jsx("hr",{className:"my-8 border-t-2 border-gray-200"});case"checklist":return t.jsx("ul",{className:"my-8",children:a.items.map((e,s)=>t.jsxs("li",{className:"flex items-center space-x-4 my-3",children:[t.jsx("input",{type:"checkbox",checked:e.checked,readOnly:!0,className:"form-checkbox h-6 w-6 text-blue-600"}),t.jsx("span",{className:"text-gray-800 text-xl",dangerouslySetInnerHTML:{__html:e.text}})]},s))});case"warning":return t.jsxs("div",{className:"my-8 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 p-6 rounded-xl shadow-lg",role:"alert",children:[a.title&&t.jsx("p",{className:"font-bold text-2xl",children:a.title}),a.message&&t.jsx("p",{className:"mt-3 text-xl",dangerouslySetInnerHTML:{__html:a.message}})]});case"linkTool":return t.jsx(S,{data:a});case"youtubeEmbed":return t.jsx(M,{data:a});default:return t.jsxs("div",{className:"my-8 text-red-500",children:["Unsupported block type: ",s]})}},T=250,B=()=>t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})}),R=()=>t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),P=()=>t.jsxs("svg",{className:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),D=l.memo(({action:s,replyingTo:a=null,onPost:r,initialText:l="",autoFocus:i=!1,onCancel:n})=>{const[c,d]=e.useState(l),[u,h]=e.useState(!1),[g,p]=e.useState(l.length||0),[y,b]=e.useState(!1),{blog:f}=e.useContext(te)||{},{userAuth:j}=e.useContext(m),{username:N,profile_img:w,fullname:k}=j||{},_=e.useRef(null);e.useEffect(()=>{d(l),p(l.length||0)},[l]),e.useEffect(()=>{i&&_.current&&_.current.focus()},[i]);const C=e.useCallback(e=>{const t=e.target.value;t.length<=T&&(d(t),p(t.length))},[]),L=e.useCallback(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),S())},[c]),S=e.useCallback(async()=>{var e,t;if(!N)return void o.error(`Please login to ${s.toLowerCase()}`);const a=v.sanitize(c.trim());if(!a)return void o.error(`Please write something to ${s.toLowerCase()}`);h(!0);const l=o.loading(("Save"===s?"Saving":"Posting")+"...");try{if("Save"===s||"Reply"===s)await r(a),d(""),"Save"===s&&n&&n();else if("Comment"===s){if(!(null==f?void 0:f._id))throw new Error("Blog data is not available.");await x.post("/add-comment",{blog_id:f._id,blog_author:f.authorId._id,comment:a}),d(""),p(0)}o.success(`${s}ed successfully!`,{id:l})}catch(i){const a=(null==(t=null==(e=i.response)?void 0:e.data)?void 0:t.error)||"ECONNABORTED"===i.code?"Request timeout.":`Failed to ${s.toLowerCase()}`;o.error(a,{id:l})}finally{h(!1)}},[s,f,c,r,n,N]),M=a?"Write your reply...":"Save"===s?"Edit your comment...":`Share your thoughts${N?`, ${N.split(" ")[0]}`:""}...`;return t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("img",{src:w||"/default-avatar.png",alt:"",className:"w-10 h-10 rounded-lg object-cover border border-gray-200 dark:border-gray-600",loading:"lazy",decoding:"async",onError:e=>{e.target.src="/default-avatar.png",e.target.onerror=null}})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"relative rounded-lg transition-colors duration-200 "+(y?"bg-white dark:bg-gray-800 ring-2 ring-blue-500/20 shadow-sm":"bg-gray-50 dark:bg-gray-800/50"),children:[t.jsx("textarea",{ref:_,value:c,onChange:C,onKeyDown:L,onFocus:()=>b(!0),onBlur:()=>b(!1),placeholder:M,disabled:u,autoFocus:i,className:"w-full p-3 pr-20 bg-transparent border-0 rounded-lg resize-none placeholder-gray-500 dark:placeholder-gray-400 text-gray-800 dark:text-gray-200 focus:outline-none text-sm leading-relaxed transition-colors",rows:"3",maxLength:T,"aria-label":a?"Reply comment field":"Comment field"}),g>175&&t.jsx("div",{className:"absolute right-3 top-3",children:t.jsxs("div",{className:"text-xs font-medium px-2 py-1 rounded "+(g>225?"text-red-500 bg-red-500/10":"text-gray-500 bg-gray-500/10"),children:[g,"/",T]})})]}),t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[t.jsx("div",{children:n&&t.jsx("button",{onClick:n,className:"px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",disabled:u,children:"Cancel"})}),t.jsx("button",{onClick:S,disabled:u||!c.trim(),className:"px-4 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 "+(u||!c.trim()?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white shadow-sm hover:shadow"),children:u?t.jsxs(t.Fragment,{children:[t.jsx(P,{}),"Save"===s?"Saving...":"Posting..."]}):t.jsxs(t.Fragment,{children:["Save"===s?t.jsx(R,{}):t.jsx(B,{}),s]})})]})]})]})})});D.propTypes={action:N.string.isRequired,replyingTo:N.string,onPost:N.func,initialText:N.string,autoFocus:N.bool,onCancel:N.func},D.displayName="CommentField";const z=({filled:e=!1,className:s="w-4 h-4"})=>t.jsx("svg",{className:s,fill:e?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),A=({className:e="w-4 h-4"})=>t.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),I=({className:e="w-4 h-4"})=>t.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})}),F=({className:e="w-4 h-4"})=>t.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),U=({className:e="w-4 h-4"})=>t.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),H=({className:e="w-3 h-3"})=>t.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),W=({className:e="w-3 h-3"})=>t.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}),q=({className:e="w-4 h-4"})=>t.jsxs("svg",{className:`animate-spin ${e}`,fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),O=l.memo(({commentData:s,depth:a=0})=>{const[r,l]=e.useState(s),[i,n]=e.useState(s.isLiked),[c,d]=e.useState(s.upvotesCount),[g,p]=e.useState(!1),[y,b]=e.useState(!1),[f,j]=e.useState(!1),[v,N]=e.useState([]),[w,k]=e.useState(!1),[_,C]=e.useState(!1),[L,S]=e.useState(0),[M,$]=e.useState(!1),E=e.useRef(null);var T,B;T=E,B=()=>$(!1),e.useEffect(()=>{const e=e=>{T.current&&!T.current.contains(e.target)&&B()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[T,B]);const{_id:R,blog_id:P,blog_author:V,comment:K,commentedAt:G,commented_by:J,isDeleted:Q,repliesCount:X,edited:Y}=r,{personal_info:{fullname:Z,profile_img:ee,username:te}={}}=J||{},{userAuth:se}=e.useContext(m),{access_token:ae,_id:re}=se||{},{socket:le}=u(),oe=e.useMemo(()=>re===(null==J?void 0:J._id),[re,null==J?void 0:J._id]),ie=e.useMemo(()=>re===V,[re,V]),ne=e.useMemo(()=>oe||ie,[oe,ie]);e.useEffect(()=>{if(!le||!R)return;const e={commentLiked:e=>{e._id===R&&(d(e.upvotesCount),e.userId===re&&n(e.isLiked))},commentUpdated:e=>{e._id===R&&l(t=>({...t,comment:e.comment,edited:e.edited,editedAt:e.editedAt}))},newReply:e=>{e.parent===R&&f&&N(t=>[e,...t]),e.parent===R&&l(e=>({...e,repliesCount:(e.repliesCount||0)+1}))},commentDeleted:e=>{e._id===R&&l(e=>({...e,isDeleted:!0,comment:"[deleted]",commented_by:null}))}};return Object.entries(e).forEach(([e,t])=>{le.on(e,t)}),()=>{Object.entries(e).forEach(([e,t])=>{le.off(e,t)})}},[le,R,re,f]);const ce=e.useCallback(()=>{ae?p(e=>!e):o.error("Please login to reply")},[ae]),de=e.useCallback(async e=>{var t,s;if(!ae)return void o.error("Please login to reply");const a={_id:`temp-${Date.now()}`,blog_id:P,blog_author:V,comment:e,commented_by:{personal_info:{...se}},commentedAt:(new Date).toISOString(),isReply:!0,parent:R,upvotes:[],upvotesCount:0,isLiked:!1};N(e=>[a,...e]),p(!1);try{const{data:t}=await x.post("/reply-comment",{blog_id:P,blog_author:V,comment:e,parent_comment_id:R});N(e=>e.map(e=>e._id===a._id?t:e)),o.success("Reply posted!")}catch(r){N(e=>e.filter(e=>!e._id.startsWith("temp-"))),o.error((null==(s=null==(t=r.response)?void 0:t.data)?void 0:s.error)||"Failed to post reply")}},[R,ae,P,V,se]),me=e.useCallback(async()=>{if(!w){k(!0);try{const{data:e}=await x.get(`/get-comment-replies/${R}`,{params:{skip:5*L,limit:5,user_id:re}});e.length<5&&C(!0),N(t=>[...t,...e]),S(e=>e+1)}catch(e){o.error("Failed to load replies.")}finally{k(!1)}}},[R,L,re,w,5]),xe=e.useCallback(()=>{!f&&0===v.length&&X>0&&me(),j(e=>!e)},[f,v.length,X,me]),ue=e.useCallback(async()=>{if(!ae)return void o.error("Please login to like");const e=!i;n(e),d(t=>e?t+1:t-1);try{await x.post("/like-comment",{comment_id:R})}catch(t){n(!e),d(t=>e?t-1:t+1),o.error("Like failed. Please try again.")}},[R,ae,i]),he=e.useCallback(async e=>{var t,s;if(ae)try{await x.patch(`/edit-comment/${R}`,{comment:e}),b(!1),o.success("Comment updated!")}catch(a){throw o.error((null==(s=null==(t=a.response)?void 0:t.data)?void 0:s.error)||"Failed to edit"),a}else o.error("Please login to edit")},[R,ae]),ge=e.useCallback(async()=>{var e,t;if(!ae)return void o.error("Please login to delete");if($(!1),!window.confirm("Are you sure you want to delete this comment?"))return;const s=o.loading("Deleting...");try{await x.delete(`/delete-comment/${R}`),o.success("Comment deleted",{id:s})}catch(a){o.error((null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.error)||"Failed to delete",{id:s})}},[R,ae]);return a>5?null:Q?t.jsx("div",{className:"mb-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg text-center",children:t.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 dark:text-gray-500 text-sm",children:[t.jsx(U,{className:"w-4 h-4"}),"This comment has been deleted"]})}):t.jsx("div",{className:"mb-3 "+(a>0?"ml-3 pl-3 border-l border-gray-200 dark:border-gray-600":""),children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("img",{src:ee||"/default-avatar.png",alt:"",className:"w-8 h-8 rounded-lg object-cover border border-gray-200 dark:border-gray-600",loading:"lazy",decoding:"async",onError:e=>{e.target.src="/default-avatar.png",e.target.onerror=null}})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[y?t.jsx(D,{action:"Save",initialText:K,onPost:he,onCancel:()=>b(!1),autoFocus:!0}):t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-100 dark:border-gray-700 shadow-sm",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:Z||"Anonymous"}),te&&t.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs truncate",children:["@",te]}),t.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-xs",children:h(G)||"Just now"}),Y&&t.jsxs("span",{className:"text-blue-500 dark:text-blue-400 text-xs flex items-center gap-1",children:[t.jsx(F,{className:"w-3 h-3"}),"edited"]})]})}),ne&&t.jsxs("div",{className:"relative",ref:E,children:[t.jsx("button",{onClick:()=>$(e=>!e),className:"p-1 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Comment actions",children:t.jsx(I,{})}),M&&t.jsxs("div",{className:"absolute top-full right-0 z-10 w-36 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 py-1",children:[oe&&t.jsxs("button",{onClick:()=>{b(!0),$(!1)},className:"w-full text-left flex items-center gap-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",children:[t.jsx(F,{className:"w-4 h-4"}),"Edit"]}),t.jsxs("button",{onClick:ge,className:"w-full text-left flex items-center gap-2 px-3 py-2 text-sm text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",children:[t.jsx(U,{className:"w-4 h-4"}),"Delete"]})]})]})]}),t.jsx("p",{className:"text-gray-800 dark:text-gray-200 text-sm mb-3 leading-relaxed",children:K}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("button",{onClick:ue,disabled:!ae,className:`flex items-center gap-1 text-sm transition-colors ${i?"text-red-500":"text-gray-500 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400"} ${ae?"":"opacity-50 cursor-not-allowed"}`,children:[t.jsx(z,{filled:i}),t.jsx("span",{children:c||0})]}),t.jsxs("button",{onClick:ce,disabled:!ae,className:"flex items-center gap-1 text-sm transition-colors "+(ae?"text-gray-500 dark:text-gray-400 hover:text-blue-500 dark:hover:text-blue-400":"opacity-50 cursor-not-allowed text-gray-400"),children:[t.jsx(A,{}),t.jsx("span",{children:"Reply"})]})]})]}),g&&t.jsx("div",{className:"mt-3",children:t.jsx(D,{action:"Reply",replyingTo:R,onPost:de,autoFocus:!0,onCancel:()=>p(!1)})}),X>0&&t.jsx("div",{className:"mt-3",children:f?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:xe,className:"flex items-center gap-2 text-blue-500 dark:text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 text-sm font-medium mb-2",children:[t.jsx(W,{}),"Hide replies"]}),t.jsx("div",{className:"space-y-3",children:v.map(e=>t.jsx(O,{commentData:e,depth:a+1},e._id))}),!_&&X>v.length&&t.jsx("button",{onClick:me,disabled:w,className:"flex items-center gap-2 mt-2 text-sm "+(w?"text-gray-400":"text-blue-500 dark:text-blue-400 hover:text-blue-600 dark:hover:text-blue-300"),children:w?t.jsxs(t.Fragment,{children:[t.jsx(q,{}),"Loading..."]}):`Load ${X-v.length} more`})]}):t.jsxs("button",{onClick:xe,className:"flex items-center gap-2 text-blue-500 dark:text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 text-sm font-medium",children:[t.jsx(H,{}),`View ${X} ${X>1?"replies":"reply"}`]})})]})]})})});O.propTypes={commentData:N.object.isRequired,depth:N.number},O.displayName="CommentCard";const V=(t,s,a)=>{const[r,l]=e.useState({comments:[],loading:!1,error:null,page:0,hasMore:!0,totalCount:0}),o=e.useCallback(async(e=0,r=!1)=>{if(t){l(e=>({...e,loading:!0,error:null}));try{const o=await(async(e,t=0,s=5,a=null)=>{var r,l;try{if(!e||"string"!=typeof e)throw new Error("Invalid blogId provided");const l={blog_id:e,skip:t*s,limit:s,user_id:a,timestamp:Date.now()},o=await x.post("/get-post-comments",l,{timeout:1e4,validateStatus:e=>e<500});if(200!==o.status)throw new Error((null==(r=o.data)?void 0:r.error)||`Request failed with status ${o.status}`);return{comments:Array.isArray(o.data.comments)?o.data.comments.map(e=>({...e,isLiked:e.isLiked||!1})):[],total:Number(o.data.total)||0,hasMore:!1!==o.data.hasMore,page:Number(o.data.page)||t}}catch(o){if(401===(null==(l=o.response)?void 0:l.status))throw new Error("Please login to view comments");if("ECONNABORTED"===o.code)throw new Error("Request timeout. Please try again.");throw o}})(t,e,5,a);l(t=>({comments:r?o.comments:[...t.comments,...o.comments],loading:!1,page:e+1,hasMore:o.hasMore,totalCount:o.total,error:null})),r&&s&&s(e=>({...e,total_comments:o.total,total_parent_comments:o.total}))}catch(o){l(e=>({...e,loading:!1,error:o.message||"Failed to load comments"}))}}},[t,s,a,5]),i=e.useCallback(e=>{l(e)},[]);return e.useEffect(()=>{t&&o(0,!0)},[t,o]),{...r,fetchComments:o,setCommentsState:i}},K=()=>t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),G=()=>t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),J=()=>t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Q=l.memo(()=>{const{blog:s,commentsWrapper:a,setCommentsWrapper:r,updateBlogActivity:l}=e.useContext(te),{userAuth:o}=e.useContext(m),{_id:n}=o||{},{socket:c}=u(),d=null==s?void 0:s._id,x=(null==s?void 0:s.title)||"",{comments:h,loading:b,error:f,page:j,hasMore:v,totalCount:N,fetchComments:_,setCommentsState:C}=V(d,l,n);e.useEffect(()=>{c&&d&&(c.emit("joinCommentRoom",{blog_id:d}),c.emit("joinPostRoom",{blog_id:d}))},[c,d]),e.useEffect(()=>{if(!c||!d)return;const e=e=>{e.blog_id!==d||e.isReply||(C(t=>({...t,comments:[e,...t.comments],totalCount:t.totalCount+1})),l(e=>({...e,total_comments:(e.total_comments||0)+1,total_parent_comments:(e.total_parent_comments||0)+1})))},t=e=>{e.blog_id===d&&e.parent&&(C(t=>({...t,comments:t.comments.map(t=>t._id===e.parent?{...t,repliesCount:(t.repliesCount||0)+1}:t),totalCount:t.totalCount+1})),l(e=>({...e,total_comments:(e.total_comments||0)+1})))},s=e=>{e.blog_id===d&&(C(t=>{const s=t.comments.some(t=>t._id===e._id);return{...t,comments:t.comments.map(t=>t._id===e._id?{...t,isDeleted:!0,comment:"[deleted]",commented_by:null}:t._id===e.parent?{...t,repliesCount:Math.max(0,(t.repliesCount||1)-1)}:t),totalCount:Math.max(0,t.totalCount-1),total_parent_comments:s?Math.max(0,t.totalCount-1):t.totalCount}}),l(e=>({...e,total_comments:Math.max(0,(e.total_comments||1)-1),total_parent_comments:Math.max(0,(e.total_parent_comments||1)-1)})))};return c.on("newComment",e),c.on("newReply",t),c.on("commentDeleted",s),()=>{c.off("newComment",e),c.off("newReply",t),c.off("commentDeleted",s)}},[c,d,C,l]);const{ref:L,inView:S}=i({threshold:0,triggerOnce:!1}),M=e.useCallback(()=>{!b&&v&&_(j)},[_,b,v,j]);e.useEffect(()=>{S&&M()},[S,M]);const $=e.useMemo(()=>t.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-500 rounded-lg text-white",children:t.jsx(G,{})}),t.jsxs("div",{children:[t.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white",children:["Comments (",N,")"]}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-[200px]",children:x})]})]}),t.jsx("button",{onClick:()=>r(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Close comments",children:t.jsx(K,{})})]})}),[N,x,r]);return t.jsx(w,{children:a&&t.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex justify-end bg-black/50 backdrop-blur-sm",onClick:()=>r(!1),children:t.jsxs(k.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"w-full max-w-md h-full bg-white dark:bg-gray-900 shadow-2xl flex flex-col",onClick:e=>e.stopPropagation(),children:[$,t.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:t.jsxs("div",{className:"p-4 space-y-6",children:[t.jsx(D,{action:"comment"}),f&&t.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center text-red-500",children:[t.jsx(J,{}),t.jsx("p",{className:"mt-2 text-sm",children:f}),t.jsx("button",{onClick:()=>_(0,!0),className:"mt-3 text-xs font-medium underline hover:text-red-600",children:"Try Again"})]}),t.jsx("div",{className:"space-y-4",children:h.map(e=>t.jsx(g,{children:t.jsx(O,{index:0,leftVal:0,commentData:e})},e._id))}),b&&t.jsx("div",{className:"flex justify-center py-4",children:t.jsx(p,{})}),!b&&!v&&h.length>0&&t.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"End of comments"}),!b&&0===h.length&&!f&&t.jsx(y,{message:"No comments yet. Be the first to share your thoughts!"}),t.jsx("div",{ref:L,className:"h-4"})]})})]})})})}),X=({className:e})=>t.jsx("div",{className:`bg-gray-200 dark:bg-gray-700 rounded-md animate-pulse ${e}`}),Y=()=>t.jsxs("div",{className:"max-w-[900px] center py-10 max-lg:px-[5vw]",children:[t.jsx(X,{className:"aspect-video w-full"}),t.jsx(X,{className:"h-12 w-3/4 mt-12"}),t.jsx(X,{className:"h-12 w-1/2 mt-4"}),t.jsxs("div",{className:"flex flex-wrap justify-between items-center my-8 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-5",children:[t.jsx(X,{className:"w-12 h-12 rounded-full"}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(X,{className:"h-5 w-32"}),t.jsx(X,{className:"h-4 w-24"})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(X,{className:"h-5 w-24"}),t.jsx(X,{className:"h-5 w-20"})]})]}),t.jsx("hr",{className:"border-dark-grey/50 my-3"}),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("div",{className:"flex gap-3 items-center",children:[t.jsx(X,{className:"w-10 h-10 rounded-full"}),t.jsx(X,{className:"h-6 w-8"}),t.jsx(X,{className:"w-10 h-10 rounded-full"}),t.jsx(X,{className:"h-6 w-8"})]}),t.jsx("div",{className:"flex gap-4 items-center",children:t.jsx(X,{className:"w-10 h-10 rounded-full"})})]}),t.jsx("hr",{className:"border-dark-grey/50 my-3"}),t.jsxs("div",{className:"my-12 flex flex-col gap-4",children:[t.jsx(X,{className:"h-6 w-full"}),t.jsx(X,{className:"h-6 w-full"}),t.jsx(X,{className:"h-6 w-11/12"}),t.jsx("br",{}),t.jsx(X,{className:"h-6 w-full"}),t.jsx(X,{className:"h-6 w-10/12"}),t.jsx("br",{}),t.jsx(X,{className:"h-48 w-full"})," ",t.jsx("br",{}),t.jsx(X,{className:"h-6 w-full"}),t.jsx(X,{className:"h-6 w-11/12"})]})]});class Z extends e.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?t.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-50 dark:bg-gray-900",children:t.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:"ðŸ˜ž"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Something went wrong"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"We're sorry for the inconvenience. Please try refreshing the page or return to the homepage."}),!1,t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[t.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:"Refresh Page"}),t.jsx(a,{to:"/",className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-center",children:"Go to Homepage"})]})]})}):this.props.children}}const ee=({src:s,placeholder:a,alt:r,className:l="",style:o={},transitionDuration:i=.3,blurAmount:n="8px"})=>{const[c,d]=e.useState(!1),[m,x]=e.useState(a);return e.useEffect(()=>{const e=new Image;return e.src=s,e.onload=()=>{x(s),d(!0)},e.onerror=()=>{x(a||"/placeholder-image.jpg"),d(!0)},()=>{e.onload=null,e.onerror=null}},[s,a]),t.jsxs("div",{className:`relative overflow-hidden ${l}`,style:o,children:[t.jsx("img",{src:a,alt:r,className:"absolute inset-0 w-full h-full object-cover transition-opacity duration-500 "+(c?"opacity-0":"opacity-100"),style:{filter:`blur(${n})`,transform:"scale(1.1)"}}),t.jsx(k.img,{src:m,alt:r,className:"w-full h-full object-cover",initial:{opacity:0},animate:{opacity:c?1:0},transition:{duration:i},loading:"lazy"}),!c&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})})]})},te=e.createContext({}),se=l.memo(()=>{var r,l,o,i;const{blog_id:m}=n(),h=c(),{socket:p}=u(),[y,v]=e.useState({title:"",des:"",content:[],banner:"",authorId:{},tags:[],activity:{},publishedAt:"",readingTime:5}),[N,w]=e.useState([]),[k,C]=e.useState(!0),[L,S]=e.useState(null),[M,$]=e.useState(!1),{title:T,des:B,content:R,banner:P,authorId:{personal_info:{fullname:D,username:z,profile_img:A}={}}={},publishedAt:I,tags:F=[],readingTime:U}=y,H=e.useCallback(async()=>{var e,t,s,a;try{C(!0),S(null);const{data:{blog:t}}=await x.post("/get-post",{blog_id:m}),[s,a]=await Promise.allSettled([b(t._id),(null==(e=t.tags)?void 0:e.length)?x.post("/similar/posts",{tag:t.tags[0],blog_id:m}):Promise.resolve({data:[]})]),r="fulfilled"===s.status?s.value.comments:[],l="fulfilled"===s.status?s.value.total:0;v({...t,comments:r,activity:{...t.activity,total_comments:l,total_parent_comments:l,isLikedByUser:t.activity.isLikedByUser||!1}}),"fulfilled"===a.status&&a.value.data&&w(a.value.data)}catch(r){const e=(null==(s=null==(t=r.response)?void 0:t.data)?void 0:s.error)||r.message||"Failed to load blog post";S(e),404===(null==(a=r.response)?void 0:a.status)&&h("/404",{replace:!0})}finally{C(!1)}},[m,h]),W=e.useCallback(e=>{v(t=>({...t,activity:{...t.activity,...e}}))},[]);return e.useEffect(()=>{H()},[H]),e.useEffect(()=>{if(!p||!m)return;p.emit("joinPostRoom",{blog_id:m});const e=e=>{e.blog_id===m&&W({total_likes:e.total_likes})},t=e=>{e.blog_id===m&&(toast.error("This post has been deleted by the author."),h("/"))};return p.on("likeUpdate",e),p.on("postDeleted",t),()=>{p.off("likeUpdate",e),p.off("postDeleted",t)}},[p,m,W,h]),k?t.jsx(Y,{}):L?t.jsx("div",{className:"max-w-[900px] center py-10 max-lg:px-[5vw]",children:t.jsx(f,{message:L,onRetry:H})}):t.jsxs(Z,{children:[t.jsx(j,{title:T,description:B||`${T} - A post by ${D}`,image:P,type:"article",schema:{"@context":"https://schema.org","@type":"BlogPosting",headline:T,description:B,image:P,author:{"@type":"Person",name:D},datePublished:I,timeRequired:`PT${U}M`,wordCount:(null==(l=null==(r=R[0])?void 0:r.blocks)?void 0:l.reduce((e,t)=>{var s,a;return e+((null==(a=null==(s=t.data)?void 0:s.text)?void 0:a.split(" ").length)||0)},0))||0}}),t.jsx(g,{children:t.jsxs(te.Provider,{value:{blog:y,setBlog:v,updateBlogActivity:W,commentsWrapper:M,setCommentsWrapper:$},children:[t.jsx(s,{}),M&&t.jsx(Q,{}),t.jsxs("article",{className:"max-w-[900px] center py-10 max-lg:px-[5vw]",children:[t.jsxs("header",{className:"mb-12",children:[t.jsx(d,{height:500,once:!0,offset:100,children:t.jsx(ee,{src:P,placeholder:"/placeholder-blog.jpg",className:"aspect-video rounded-xl shadow-lg w-full object-cover",alt:T})}),t.jsx("div",{className:"mt-12",children:t.jsx("h1",{className:"text-4xl font-bold mb-4 text-gradient bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:T})}),t.jsxs("div",{className:"flex flex-wrap justify-between items-center my-8 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-5",children:[t.jsx(d,{once:!0,offset:100,children:t.jsx("img",{className:"w-12 h-12 rounded-full object-cover border-2 border-white shadow-md",src:A,alt:D,loading:"lazy"})}),t.jsx("div",{children:t.jsxs("p",{className:"font-medium capitalize",children:[D,t.jsx("br",{}),t.jsxs(a,{className:"text-twitter hover:underline text-sm font-normal",to:`/user/${z}`,children:["@",z]})]})})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[t.jsxs("span",{className:"text-dark-gray opacity-75 flex items-center gap-1",children:[t.jsx("i",{className:"fi fi-rr-calendar-clock text-base"}),(O=I,new Date(O).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))]}),t.jsxs("span",{className:"text-dark-gray opacity-75 flex items-center gap-1",children:[t.jsx("i",{className:"fi fi-rr-book-open-cover text-base"}),(q=U||5,`${q} min read`)]})]})]}),t.jsx(_,{})]}),t.jsx("section",{className:"my-12 font-gelasio blog-page-content prose prose-lg max-w-none dark:prose-invert prose-headings:font-bold prose-a:text-accent hover:prose-a:text-accent-dark prose-img:rounded-xl prose-img:shadow-md",children:null==(i=null==(o=R[0])?void 0:o.blocks)?void 0:i.map((e,s)=>t.jsx("div",{className:"my-4 md:my-8",children:t.jsx(E,{block:e})},s))}),t.jsxs("footer",{className:"mt-16",children:[t.jsx(_,{}),F.length>0&&t.jsxs("div",{className:"mt-8",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Tags"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:F.map((e,s)=>t.jsxs("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-full text-sm text-gray-700 dark:text-gray-300",children:["#",e]},s))})]}),N.length>0&&t.jsxs("div",{className:"mt-12",children:[t.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Similar Posts"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:N.map(e=>t.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[t.jsx("h4",{className:"font-semibold text-lg mb-2",children:e.title}),t.jsx("p",{className:"text-gray-600 text-sm mb-2",children:e.des}),t.jsx(a,{to:`/blog/${e.blog_id}`,className:"text-blue-600 hover:underline text-sm",children:"Read more"})]},e._id))})]})]})]})]})})]});var q,O});export{se as default,te as postContext};
