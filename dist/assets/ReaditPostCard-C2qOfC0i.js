import{r as v,j as e,m as N,L as d,g as S,V as b}from"./index-MvaMJuCp.js";import{V as $}from"./VoteButtons-fyW-aTpy.js";const P=({post:a})=>{var x;const[C,h]=v.useState(!1);if(!a||!a._id)return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 shadow-sm border border-gray-200 dark:border-gray-700 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded w-full"})]});const{author:t={},title:s="Untitled",content:l="",community:r={},createdAt:y=new Date,votes:_=0,commentCount:p=0,_id:o,postType:u="text",image:c,url:n}=a,f=((x=t==null?void 0:t.personal_info)==null?void 0:x.username)||"deleted_user",i=(r==null?void 0:r.name)||"unknown",g=(r==null?void 0:r.icon)||"",k=async(w="copy")=>{const m=`${window.location.origin}/readit/post/${o}`;switch(w){case"copy":try{await navigator.clipboard.writeText(m),b.success("Link copied!")}catch{b.error("Failed to copy link")}break;case"twitter":window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(s)}&url=${encodeURIComponent(m)}`,"_blank");break}h(!1)},j=()=>{switch(u){case"image":return c?e.jsx("div",{className:"mt-3 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 bg-black",children:e.jsx("img",{src:c,alt:s,className:"w-full max-h-[500px] object-contain",loading:"lazy"})}):null;case"link":return n?e.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-gray-100 transition-colors",children:e.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-500",children:[e.jsx("i",{className:"fi fi-rr-link text-sm"}),e.jsx("span",{className:"text-sm truncate flex-1 underline",children:n}),e.jsx("i",{className:"fi fi-rr-arrow-up-right-from-square text-xs"})]})}):null;default:return l?e.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mt-2 line-clamp-3 font-serif leading-relaxed",children:l}):null}};return e.jsx(N.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.3},className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-colors duration-200 mb-4 overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-10 bg-gray-50 dark:bg-gray-800/50 border-r border-gray-100 dark:border-gray-700 flex flex-col items-center py-2 gap-1",children:e.jsx($,{item:a})}),e.jsxs("div",{className:"p-3 pt-2 flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mb-1 flex-wrap",children:[e.jsxs(d,{to:`/readit/c/${i}`,className:"flex items-center gap-1 font-bold text-black dark:text-white hover:underline",children:[g&&e.jsx("img",{src:g,alt:i,className:"w-4 h-4 rounded-full object-cover"}),"c/",i]}),e.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"•"}),e.jsxs("span",{className:"hover:underline cursor-pointer",children:["Posted by u/",f]}),e.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"•"}),e.jsx("span",{children:S(y)})]}),e.jsxs(d,{to:`/readit/post/${o}`,className:"block group",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1 leading-snug group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:s}),j()]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(d,{to:`/readit/post/${o}#comments`,className:"flex items-center gap-1 px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400 text-xs font-bold transition-colors",children:[e.jsx("i",{className:"fi fi-rr-comment-alt"}),p," Comments"]}),e.jsxs("button",{onClick:()=>k("copy"),className:"flex items-center gap-1 px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400 text-xs font-bold transition-colors",children:[e.jsx("i",{className:"fi fi-rr-share"})," Share"]}),e.jsxs("button",{className:"flex items-center gap-1 px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400 text-xs font-bold transition-colors",children:[e.jsx("i",{className:"fi fi-rr-bookmark"})," Save"]})]})]})]})})};export{P as R};
