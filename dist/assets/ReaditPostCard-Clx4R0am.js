import{r as e,b as r,j as t,m as s,L as a,B as i,O as n,z as l}from"./index-BK9O-y3K.js";import{V as o}from"./VoteButtons-CRN5G-6G.js";const d=e.memo(({post:d})=>{var c;if(!d||!d._id)return null;const{socket:m}=r(),[x,p]=e.useState(d);e.useEffect(()=>{p(d)},[d]),e.useEffect(()=>{if(!m||!d._id)return;const e=e=>{e._id===d._id&&p(r=>({...r,...e}))};return m.on("postUpdated",e),()=>m.off("postUpdated",e)},[m,d._id]);const{author:g,title:u,content:b,community:h,createdAt:f,_id:j,postType:k,image:y,url:N,commentCount:v}=x;return t.jsxs(s.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"card-blog flex mb-4",children:[t.jsx("div",{className:"w-12 bg-gray-50 dark:bg-gray-800/50 border-r border-gray-100 dark:border-gray-700 pt-2 flex flex-col items-center",children:t.jsx(o,{item:x})}),t.jsxs("div",{className:"flex-1 p-3 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[h&&t.jsxs(a,{to:`/readit/c/${h.name}`,className:"font-bold text-black dark:text-white hover:underline flex items-center gap-1",children:[h.icon&&t.jsx("img",{src:h.icon,className:"w-4 h-4 rounded-full",alt:""}),"c/",h.name]}),t.jsx("span",{children:"•"}),t.jsxs("span",{className:"hover:underline",children:["u/",null==(c=null==g?void 0:g.personal_info)?void 0:c.username]}),t.jsx("span",{children:"•"}),t.jsx("span",{children:i(f)})]}),t.jsxs(a,{to:`/readit/post/${j}`,className:"block group",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white leading-snug group-hover:text-primary transition-colors",children:u}),"image"===k&&y?t.jsx("div",{className:"mt-3 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-black max-h-[500px] flex justify-center",children:t.jsx(n,{src:y,alt:u,className:"max-h-[500px] object-contain"})}):"link"===k&&N?t.jsxs("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"mt-3 flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg text-blue-600 dark:text-blue-400 hover:underline",onClick:e=>e.stopPropagation(),children:[t.jsx("i",{className:"fi fi-rr-link","aria-hidden":"true"}),t.jsx("span",{className:"truncate",children:N})]}):t.jsx("p",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300 line-clamp-3",children:b})]}),t.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs font-bold text-gray-500",children:[t.jsxs(a,{to:`/readit/post/${j}`,className:"btn-ghost btn-sm flex items-center gap-1",children:[t.jsx("i",{className:"fi fi-rr-comment-alt","aria-hidden":"true"})," ",v," Comments"]}),t.jsxs("button",{onClick:e=>{e.preventDefault(),navigator.clipboard.writeText(`${window.location.origin}/readit/post/${j}`),l.success("Link copied!")},className:"btn-ghost btn-sm flex items-center gap-1",children:[t.jsx("i",{className:"fi fi-rr-share","aria-hidden":"true"})," Share"]})]})]})]})});export{d as R};
