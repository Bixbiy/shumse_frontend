import{j as e}from"./vendor-markdown-DVKDwQVh.js";import{r,L as t}from"./vendor-react-B32pNUrn.js";import{V as s}from"./VoteButtons-CwxkhivG.js";import{u as a,g as i,O as n}from"./index-DPOBqJFm.js";import{m as o,V as l}from"./vendor-ui-BqXYh4xT.js";const d=r.memo(({post:d})=>{var c;if(!d||!d._id)return null;const{socket:m}=a(),[x,p]=r.useState(d);r.useEffect(()=>{p(d)},[d]),r.useEffect(()=>{if(!m||!d._id)return;const e=e=>{e._id===d._id&&p(r=>({...r,...e}))};return m.on("postUpdated",e),()=>m.off("postUpdated",e)},[m,d._id]);const{author:u,title:g,content:f,community:h,createdAt:b,_id:j,postType:k,image:v,url:y,commentCount:N}=x;return e.jsxs(o.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"card-blog flex mb-4",children:[e.jsx("div",{className:"w-12 bg-gray-50 dark:bg-gray-800/50 border-r border-gray-100 dark:border-gray-700 pt-2 flex flex-col items-center",children:e.jsx(s,{item:x})}),e.jsxs("div",{className:"flex-1 p-3 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[h&&e.jsxs(t,{to:`/readit/c/${h.name}`,className:"font-bold text-black dark:text-white hover:underline flex items-center gap-1",children:[h.icon&&e.jsx("img",{src:h.icon,className:"w-4 h-4 rounded-full",alt:""}),"c/",h.name]}),e.jsx("span",{children:"•"}),e.jsxs("span",{className:"hover:underline",children:["u/",null==(c=null==u?void 0:u.personal_info)?void 0:c.username]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:i(b)})]}),e.jsxs(t,{to:`/readit/post/${j}`,className:"block group",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white leading-snug group-hover:text-primary transition-colors",children:g}),"image"===k&&v?e.jsx("div",{className:"mt-3 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-black max-h-[500px] flex justify-center",children:e.jsx(n,{src:v,alt:g,className:"max-h-[500px] object-contain"})}):"link"===k&&y?e.jsxs("a",{href:y,target:"_blank",rel:"noopener noreferrer",className:"mt-3 flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg text-blue-600 dark:text-blue-400 hover:underline",onClick:e=>e.stopPropagation(),children:[e.jsx("i",{className:"fi fi-rr-link","aria-hidden":"true"}),e.jsx("span",{className:"truncate",children:y})]}):e.jsx("p",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300 line-clamp-3",children:f})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs font-bold text-gray-500",children:[e.jsxs(t,{to:`/readit/post/${j}`,className:"btn-ghost btn-sm flex items-center gap-1",children:[e.jsx("i",{className:"fi fi-rr-comment-alt","aria-hidden":"true"})," ",N," Comments"]}),e.jsxs("button",{onClick:e=>{e.preventDefault(),navigator.clipboard.writeText(`${window.location.origin}/readit/post/${j}`),l.success("Link copied!")},className:"btn-ghost btn-sm flex items-center gap-1",children:[e.jsx("i",{className:"fi fi-rr-share","aria-hidden":"true"})," Share"]})]})]})]})});export{d as R};
