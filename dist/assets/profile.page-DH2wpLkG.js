import{k as e,r as t,j as s,L as a,F as l,l as r,m as i,n as o,o as n,p as c}from"./vendor-react-FSHz6IhY.js";import{U as d,a as m,S as x}from"./index-DdTfkRPQ.js";import{m as p,A as g}from"./vendor-animation-CVt0Hee3.js";import"./vendor-misc-DyOKPbcj.js";import"./vendor-socket-BtemFTwA.js";import"./vendor-utils-CuK_ifhU.js";const h=()=>s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-300 rounded w-3/4 mx-auto"}),s.jsx("div",{className:"h-64 bg-gray-300 rounded-lg mx-auto"}),s.jsx("div",{className:"h-6 bg-gray-300 rounded w-1/2 mx-auto"})]}),u=[{key:"facebook",Icon:l,color:"text-blue-600"},{key:"twitter",Icon:r,color:"text-blue-400"},{key:"instagram",Icon:i,color:"text-pink-500"},{key:"linkedin",Icon:o,color:"text-blue-700"},{key:"github",Icon:n,color:"text-gray-800"},{key:"website",Icon:c,color:"text-green-600"}],f=()=>{const{id:l}=e(),{userAuth:r}=t.useContext(d),i=t.useMemo(()=>null==r?void 0:r.id,[r]),[o,n]=t.useState(null),[c,f]=t.useState(!0),[j,b]=t.useState("posts"),[y,v]=t.useState([]),[N,w]=t.useState([]),[k,S]=t.useState(!0),[_,I]=t.useState(1),P=t.useRef(),C=t.useCallback(e=>{c||(P.current&&P.current.disconnect(),P.current=new IntersectionObserver(e=>{e[0].isIntersecting&&"posts"===j&&k&&I(e=>e+1)}),e&&P.current.observe(e))},[c,k,j]);if(t.useEffect(()=>{f(!0),m.post("/get-profile",{username:l}).then(({data:e})=>{e&&(e._id||e.id)?(n(e),v(e.blogs||[]),w(e.stories||[]),S((e.blogs||[]).length>=8)):n({notFound:!0})}).catch(()=>n({notFound:!0})).finally(()=>f(!1))},[l]),t.useEffect(()=>{1!==_&&m.get("/get-profile-posts",{params:{user:l,page:_,limit:8}}).then(({data:e})=>{e.length>0?(v(t=>[...t,...e]),e.length<8&&S(!1)):S(!1)}).catch(()=>S(!1))},[_,l]),c)return s.jsx("div",{className:"mt-20",children:s.jsx(h,{})});if(o.notFound)return s.jsx("p",{className:"text-center text-xl text-gray-500 mt-20",children:"User not found."});const{personal_info:{fullname:F,username:$,profile_img:z,bio:A},account_info:{totalPosts:E,total_reads:U},social_links:D,joinedAt:L}=o;return s.jsxs(s.Fragment,{children:[s.jsx(x,{title:`${F} (@${$}) â€¢ Profile`,description:A||`${F}'s profile on OurPlatform`,image:z||"/default-avatar.png",type:"profile",schema:{"@context":"https://schema.org","@type":"Person",name:F,url:window.location.href,description:A,image:z}}),s.jsxs(p.div,{className:"max-w-3xl mx-auto p-6 bg-white bg-opacity-60 backdrop-blur-md rounded-2xl shadow-xl mt-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[s.jsx("img",{src:z||"/default-avatar.png",alt:F,loading:"lazy",className:"w-32 h-32 rounded-full border-4 border-gradient-to-r from-indigo-400 to-purple-400 object-cover"}),s.jsxs("div",{className:"text-center sm:text-left",children:[s.jsx("h1",{className:"text-4xl font-extrabold text-gray-900",children:F}),s.jsxs("p",{className:"text-lg text-gray-600",children:["@",$]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Joined ",new Date(L).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex justify-around mt-6 py-4 border-t border-b border-gray-200",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold",children:E}),s.jsx("p",{className:"text-sm text-gray-500",children:"Posts"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold",children:U}),s.jsx("p",{className:"text-sm text-gray-500",children:"Reads"})]})]}),String(i)===String(o._id||o.id)&&s.jsx("div",{className:"flex justify-center my-4",children:s.jsx(a,{to:"/settings/edit-profile",className:"px-6 py-2 uppercase text-sm tracking-wide bg-gradient-to-br from-blue-900 to-indigo-900 text-white rounded-full shadow hover:scale-105 transform transition",children:"Edit Profile"})}),s.jsxs(p.div,{className:"mt-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[s.jsx("hr",{className:"border-black w-50 mt-4 mb-2 opacity-[20%] "}),s.jsx("p",{className:"text-gray-700 text-center mt-2",children:A||"No bio  available."}),s.jsx("hr",{className:"border-black w-50 mt-4 mb-2 opacity-[20%] "})]}),s.jsx("div",{className:"flex justify-center space-x-4 mt-6",children:u.map(({key:e,Icon:t,color:a})=>D[e]?s.jsx("a",{href:D[e],target:"_blank",rel:"noopener noreferrer","aria-label":e,className:`p-3 bg-white rounded-full shadow-lg transform hover:scale-110 transition ${a}`,children:s.jsx(t,{size:20})},e):null)}),s.jsxs("div",{className:"mt-8",children:[s.jsx("div",{className:"flex justify-center space-x-8 border-b",children:["posts","stories"].map(e=>s.jsx("button",{onClick:()=>b(e),className:"pb-2 "+(j===e?"border-b-4 border-gradient-to-r from-indigo-400 to-purple-400 font-semibold text-gray-900":"text-gray-500 hover:text-gray-700"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),s.jsx(g,{mode:"wait",children:"posts"===j?s.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:[y.map((e,t)=>{const l=y.length===t+1;return s.jsxs(a,{to:`/post/${e.blog_id}`,ref:l?C:null,className:"bg-white  rounded-2xl overflow-hidden shadow-lg transform hover:scale-105 transition",children:[s.jsx("div",{className:"relative h-48 w-full",children:s.jsx("img",{src:e.banner||"/post-placeholder.jpg",alt:e.title,loading:"lazy",className:"object-cover w-full h-full"})}),s.jsxs("div",{className:"p-4",children:[s.jsx("h4",{className:" line-clamp-1  mb-2",children:e.title}),s.jsx("p",{className:"text-gray-600 text-sm line-clamp-2",children:e.des||"No description available."})]})]},e.blog_id)}),k&&s.jsx("div",{className:"col-span-full flex justify-center mt-4",children:s.jsx(h,{})})]},"posts"):s.jsx(p.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:N.length>0?N.map(e=>s.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-lg transform hover:scale-105 transition cursor-pointer",onClick:()=>window.alert("Story modal open logic"),children:[s.jsx("div",{className:"relative h-48 w-full",children:s.jsx("img",{src:e.banner||"/story-placeholder.jpg",alt:e.title,loading:"lazy",className:"object-cover w-full h-full"})}),s.jsx("div",{className:"p-4",children:s.jsx("h4",{className:" font-bold text-gray-900",children:e.title})})]},e.story_id)):s.jsx("p",{className:"col-span-full text-center text-gray-500",children:"No stories available."})},"stories")})]})]})]})};export{f as default};
