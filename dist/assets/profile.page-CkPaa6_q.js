import{u as e,r as t,U as s,a,j as l,S as r,m as i,L as o,A as n}from"./index-BK9O-y3K.js";import{F as c,a as d,b as m,c as x,d as p,e as g}from"./index-Ce8XiRW5.js";import"./iconBase-BgOIwoCW.js";const h=()=>l.jsxs("div",{className:"animate-pulse space-y-4",children:[l.jsx("div",{className:"h-8 bg-gray-300 rounded w-3/4 mx-auto"}),l.jsx("div",{className:"h-64 bg-gray-300 rounded-lg mx-auto"}),l.jsx("div",{className:"h-6 bg-gray-300 rounded w-1/2 mx-auto"})]}),u=[{key:"facebook",Icon:c,color:"text-blue-600"},{key:"twitter",Icon:d,color:"text-blue-400"},{key:"instagram",Icon:m,color:"text-pink-500"},{key:"linkedin",Icon:x,color:"text-blue-700"},{key:"github",Icon:p,color:"text-gray-800"},{key:"website",Icon:g,color:"text-green-600"}],f=()=>{const{id:c}=e(),{userAuth:d}=t.useContext(s),m=t.useMemo(()=>null==d?void 0:d.id,[d]),[x,p]=t.useState(null),[g,f]=t.useState(!0),[j,b]=t.useState("posts"),[y,N]=t.useState([]),[v,w]=t.useState([]),[k,S]=t.useState(!0),[_,I]=t.useState(1),P=t.useRef(),C=t.useCallback(e=>{g||(P.current&&P.current.disconnect(),P.current=new IntersectionObserver(e=>{e[0].isIntersecting&&"posts"===j&&k&&I(e=>e+1)}),e&&P.current.observe(e))},[g,k,j]);if(t.useEffect(()=>{f(!0),a.post("/get-profile",{username:c}).then(({data:e})=>{e&&(e._id||e.id)?(p(e),N(e.blogs||[]),w(e.stories||[]),S((e.blogs||[]).length>=8)):p({notFound:!0})}).catch(()=>p({notFound:!0})).finally(()=>f(!1))},[c]),t.useEffect(()=>{1!==_&&a.get("/get-profile-posts",{params:{user:c,page:_,limit:8}}).then(({data:e})=>{e.length>0?(N(t=>[...t,...e]),e.length<8&&S(!1)):S(!1)}).catch(()=>S(!1))},[_,c]),g)return l.jsx("div",{className:"mt-20",children:l.jsx(h,{})});if(x.notFound)return l.jsx("p",{className:"text-center text-xl text-gray-500 mt-20",children:"User not found."});const{personal_info:{fullname:F,username:$,profile_img:z,bio:A},account_info:{totalPosts:E,total_reads:U},social_links:D,joinedAt:L}=x;return l.jsxs(l.Fragment,{children:[l.jsx(r,{title:`${F} (@${$}) â€¢ Profile`,description:A||`${F}'s profile on OurPlatform`,image:z||"/default-avatar.png",type:"profile",schema:{"@context":"https://schema.org","@type":"Person",name:F,url:window.location.href,description:A,image:z}}),l.jsxs(i.div,{className:"max-w-3xl mx-auto p-6 bg-white bg-opacity-60 backdrop-blur-md rounded-2xl shadow-xl mt-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[l.jsx("img",{src:z||"/default-avatar.png",alt:F,loading:"lazy",className:"w-32 h-32 rounded-full border-4 border-gradient-to-r from-indigo-400 to-purple-400 object-cover"}),l.jsxs("div",{className:"text-center sm:text-left",children:[l.jsx("h1",{className:"text-4xl font-extrabold text-gray-900",children:F}),l.jsxs("p",{className:"text-lg text-gray-600",children:["@",$]}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Joined ",new Date(L).toLocaleDateString()]})]})]}),l.jsxs("div",{className:"flex justify-around mt-6 py-4 border-t border-b border-gray-200",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold",children:E}),l.jsx("p",{className:"text-sm text-gray-500",children:"Posts"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold",children:U}),l.jsx("p",{className:"text-sm text-gray-500",children:"Reads"})]})]}),String(m)===String(x._id||x.id)&&l.jsx("div",{className:"flex justify-center my-4",children:l.jsx(o,{to:"/settings/edit-profile",className:"px-6 py-2 uppercase text-sm tracking-wide bg-gradient-to-br from-blue-900 to-indigo-900 text-white rounded-full shadow hover:scale-105 transform transition",children:"Edit Profile"})}),l.jsxs(i.div,{className:"mt-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[l.jsx("hr",{className:"border-black w-50 mt-4 mb-2 opacity-[20%] "}),l.jsx("p",{className:"text-gray-700 text-center mt-2",children:A||"No bio  available."}),l.jsx("hr",{className:"border-black w-50 mt-4 mb-2 opacity-[20%] "})]}),l.jsx("div",{className:"flex justify-center space-x-4 mt-6",children:u.map(({key:e,Icon:t,color:s})=>D[e]?l.jsx("a",{href:D[e],target:"_blank",rel:"noopener noreferrer","aria-label":e,className:`p-3 bg-white rounded-full shadow-lg transform hover:scale-110 transition ${s}`,children:l.jsx(t,{size:20})},e):null)}),l.jsxs("div",{className:"mt-8",children:[l.jsx("div",{className:"flex justify-center space-x-8 border-b",children:["posts","stories"].map(e=>l.jsx("button",{onClick:()=>b(e),className:"pb-2 "+(j===e?"border-b-4 border-gradient-to-r from-indigo-400 to-purple-400 font-semibold text-gray-900":"text-gray-500 hover:text-gray-700"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),l.jsx(n,{mode:"wait",children:"posts"===j?l.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:[y.map((e,t)=>{const s=y.length===t+1;return l.jsxs(o,{to:`/post/${e.blog_id}`,ref:s?C:null,className:"bg-white  rounded-2xl overflow-hidden shadow-lg transform hover:scale-105 transition",children:[l.jsx("div",{className:"relative h-48 w-full",children:l.jsx("img",{src:e.banner||"/post-placeholder.jpg",alt:e.title,loading:"lazy",className:"object-cover w-full h-full"})}),l.jsxs("div",{className:"p-4",children:[l.jsx("h4",{className:" line-clamp-1  mb-2",children:e.title}),l.jsx("p",{className:"text-gray-600 text-sm line-clamp-2",children:e.des||"No description available."})]})]},e.blog_id)}),k&&l.jsx("div",{className:"col-span-full flex justify-center mt-4",children:l.jsx(h,{})})]},"posts"):l.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:v.length>0?v.map(e=>l.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-lg transform hover:scale-105 transition cursor-pointer",onClick:()=>window.alert("Story modal open logic"),children:[l.jsx("div",{className:"relative h-48 w-full",children:l.jsx("img",{src:e.banner||"/story-placeholder.jpg",alt:e.title,loading:"lazy",className:"object-cover w-full h-full"})}),l.jsx("div",{className:"p-4",children:l.jsx("h4",{className:" font-bold text-gray-900",children:e.title})})]},e.story_id)):l.jsx("p",{className:"col-span-full text-center text-gray-500",children:"No stories available."})},"stories")})]})]})]})};export{f as default};
