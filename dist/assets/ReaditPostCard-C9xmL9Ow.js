import{r as e,j as r,L as t,z as s}from"./vendor-react-B97CwnuL.js";import{V as a}from"./VoteButtons-BoWDJJu9.js";import{u as i,g as n,O as o}from"./index-DsO7NqaW.js";import{m as l}from"./vendor-animation-Bq1BCxLt.js";const d=e.memo(({post:d})=>{var c;if(!d||!d._id)return null;const{socket:m}=i(),[x,p]=e.useState(d);e.useEffect(()=>{p(d)},[d]),e.useEffect(()=>{if(!m||!d._id)return;const e=e=>{e._id===d._id&&p(r=>({...r,...e}))};return m.on("postUpdated",e),()=>m.off("postUpdated",e)},[m,d._id]);const{author:u,title:g,content:f,community:h,createdAt:b,_id:j,postType:k,image:y,url:N,commentCount:v}=x;return r.jsxs(l.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"card-blog flex mb-4",children:[r.jsx("div",{className:"w-12 bg-gray-50 dark:bg-gray-800/50 border-r border-gray-100 dark:border-gray-700 pt-2 flex flex-col items-center",children:r.jsx(a,{item:x})}),r.jsxs("div",{className:"flex-1 p-3 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[h&&r.jsxs(t,{to:`/readit/c/${h.name}`,className:"font-bold text-black dark:text-white hover:underline flex items-center gap-1",children:[h.icon&&r.jsx("img",{src:h.icon,className:"w-4 h-4 rounded-full",alt:""}),"c/",h.name]}),r.jsx("span",{children:"•"}),r.jsxs("span",{className:"hover:underline",children:["u/",null==(c=null==u?void 0:u.personal_info)?void 0:c.username]}),r.jsx("span",{children:"•"}),r.jsx("span",{children:n(b)})]}),r.jsxs(t,{to:`/readit/post/${j}`,className:"block group",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white leading-snug group-hover:text-primary transition-colors",children:g}),"image"===k&&y?r.jsx("div",{className:"mt-3 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-black max-h-[500px] flex justify-center",children:r.jsx(o,{src:y,alt:g,className:"max-h-[500px] object-contain"})}):"link"===k&&N?r.jsxs("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"mt-3 flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg text-blue-600 dark:text-blue-400 hover:underline",onClick:e=>e.stopPropagation(),children:[r.jsx("i",{className:"fi fi-rr-link","aria-hidden":"true"}),r.jsx("span",{className:"truncate",children:N})]}):r.jsx("p",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300 line-clamp-3",children:f})]}),r.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs font-bold text-gray-500",children:[r.jsxs(t,{to:`/readit/post/${j}`,className:"btn-ghost btn-sm flex items-center gap-1",children:[r.jsx("i",{className:"fi fi-rr-comment-alt","aria-hidden":"true"})," ",v," Comments"]}),r.jsxs("button",{onClick:e=>{e.preventDefault(),navigator.clipboard.writeText(`${window.location.origin}/readit/post/${j}`),s.success("Link copied!")},className:"btn-ghost btn-sm flex items-center gap-1",children:[r.jsx("i",{className:"fi fi-rr-share","aria-hidden":"true"})," Share"]})]})]})]})});export{d as R};
