import{j as e,m as s,L as t,u as a,r as l,U as i,a as r,b as o,S as n,V as d,A as c}from"./index-vd7Ycuse.js";import{F as x,a as m,b as h,c as g,d as p,e as u,f,g as j,h as b,i as y}from"./index-Dqhb0SNC.js";import{P as v}from"./PostFlair-CoCmiIP4.js";const N=({community:a})=>{const{name:l="Community",settings:i={icon:null,description:"A community for interesting topics."},members:r=[],id:o,_id:n}=a||{},d=r.length||0;return e.jsxs(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{y:-5},className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100 p-4 flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:i.icon?e.jsx("img",{src:i.icon,alt:l,className:"w-14 h-14 rounded-full object-cover border-2 border-indigo-100"}):e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold text-xl",children:l.charAt(0).toUpperCase()})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs(t,{to:`/readit/${l.toLowerCase()}`,className:"block focus:outline-none",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 truncate hover:text-indigo-600 transition-colors",children:["r/",l]}),e.jsxs("p",{className:"text-sm text-gray-500 truncate",children:[d," member",1!==d?"s":""]})]})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(t,{to:`/readit/${l.toLowerCase()}`,className:"px-4 py-1.5 text-sm font-medium text-indigo-600 bg-indigo-50 rounded-full hover:bg-indigo-100 transition-colors",children:"Visit"})})]})},w=()=>e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-64 bg-gray-200 rounded-xl w-full"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 px-4 -mt-12 relative z-10",children:[e.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-300 border-4 border-white mx-auto md:mx-0"}),e.jsxs("div",{className:"flex-1 space-y-3 mt-4 text-center md:text-left",children:[e.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/3 mx-auto md:mx-0"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/4 mx-auto md:mx-0"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8",children:[e.jsx("div",{className:"h-48 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"h-48 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"h-48 bg-gray-200 rounded-xl"})]})]}),k=[{key:"facebook",Icon:p,color:"hover:text-blue-600"},{key:"twitter",Icon:u,color:"hover:text-blue-400"},{key:"instagram",Icon:f,color:"hover:text-pink-500"},{key:"linkedin",Icon:j,color:"hover:text-blue-700"},{key:"github",Icon:b,color:"hover:text-gray-900"},{key:"website",Icon:y,color:"hover:text-green-600"}],_=()=>{const{id:p}=a(),{userAuth:u}=l.useContext(i),f=l.useMemo(()=>null==u?void 0:u.id,[u]),[j,b]=l.useState(null),[y,_]=l.useState(!0),[I,S]=l.useState("posts"),[C,P]=l.useState([]),[F,z]=l.useState([]),[A,$]=l.useState(!0),[E,U]=l.useState(1),[L,T]=l.useState([]),D=l.useRef(),R=l.useCallback(e=>{y||(D.current&&D.current.disconnect(),D.current=new IntersectionObserver(e=>{e[0].isIntersecting&&"posts"===I&&A&&U(e=>e+1)}),e&&D.current.observe(e))},[y,A,I]);l.useEffect(()=>{_(!0),r.post("/get-profile",{username:p}).then(({data:e})=>{e&&(e._id||e.id)?(b(e),P(e.blogs||[]),z(e.stories||[]),$((e.blogs||[]).length>=8),T(e.communities||[])):b({notFound:!0})}).catch(()=>b({notFound:!0})).finally(()=>_(!1))},[p]),l.useEffect(()=>{1!==E&&r.get("/get-profile-posts",{params:{user:p,page:E,limit:8}}).then(({data:e})=>{e.length>0?(P(s=>[...s,...e]),e.length<8&&$(!1)):$(!1)}).catch(()=>$(!1))},[E,p]);const{socket:V}=o();if(l.useEffect(()=>{if(V)return V.on("profileUpdated",e=>{!j||j._id!==e._id&&j.id!==e._id||b(s=>({...s,personal_info:{...s.personal_info,fullname:e.personal_info.fullname,username:e.personal_info.username,profile_img:e.personal_info.profile_img,bio:e.personal_info.bio},social_links:e.social_links})),P(s=>s&&0!==s.length?s.map(s=>{var t;const a=(null==(t=s.authorId)?void 0:t._id)||s.authorId;return e._id===a?{...s,authorId:{..."object"==typeof s.authorId?s.authorId:{},personal_info:e.personal_info}}:s}):s)}),()=>{V.off("profileUpdated")}},[V,j]),y)return e.jsx("div",{className:"max-w-5xl mx-auto px-4 mt-10",children:e.jsx(w,{})});if(j.notFound)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] text-center",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-4",children:"User Not Found"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"The user you are looking for does not exist."}),e.jsx(t,{to:"/",className:"mt-6 btn-dark px-6 py-2 rounded-full",children:"Go Home"})]});const{personal_info:{fullname:H,username:J,profile_img:O,bio:G,isVerified:M},account_info:{totalPosts:W,total_reads:q},social_links:B,joinedAt:K}=j,Q=String(f)===String(j._id||j.id);return e.jsxs(e.Fragment,{children:[e.jsx(n,{title:`${H} (@${J}) â€¢ Profile`,description:G||`${H}'s profile on OurPlatform`,image:O||"/default-avatar.png",type:"profile"}),e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-gray-50 pb-20",children:[e.jsx("div",{className:"relative h-64 md:h-80 w-full bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 overflow-hidden",children:e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute -top-24 -left-24 w-96 h-96 rounded-full bg-white blur-3xl mix-blend-overlay"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-80 h-80 rounded-full bg-pink-400 blur-3xl mix-blend-overlay"})]})}),e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 relative -mt-20 md:-mt-24 z-10",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end gap-6",children:[e.jsxs("div",{className:"relative -mt-20 md:-mt-28 flex-shrink-0",children:[e.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 rounded-full p-1 bg-white shadow-lg",children:e.jsx("img",{src:O||"/default-avatar.png",alt:H,className:"w-full h-full rounded-full object-cover border-2 border-gray-100"})}),Q&&e.jsx(t,{to:"/settings/edit-profile",className:"absolute bottom-2 right-2 p-2 bg-gray-900 text-white rounded-full hover:bg-black transition shadow-md",title:"Edit Profile Picture",children:e.jsx(x,{size:14})})]}),e.jsxs("div",{className:"flex-1 text-center md:text-left w-full",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 capitalize flex items-center justify-center md:justify-start gap-2",children:[H,M&&e.jsx(d,{className:"ml-2",size:24}),"admin"===J&&e.jsx(v,{flair:{text:"Admin",backgroundColor:"#ef4444",color:"#fff"},size:"sm"})]}),e.jsxs("p",{className:"text-gray-500 font-medium",children:["@",J]})]}),e.jsx("div",{className:"flex items-center justify-center gap-3",children:Q?e.jsxs(t,{to:"/settings/edit-profile",className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-100 text-gray-900 font-medium rounded-full hover:bg-gray-200 transition-colors",children:[e.jsx(m,{})," ",e.jsx("span",{children:"Edit Profile"})]}):e.jsx("button",{className:"px-8 py-2.5 bg-black text-white font-medium rounded-full hover:bg-gray-800 transition shadow-lg shadow-gray-200",children:"Follow"})})]}),e.jsxs("div",{className:"mt-4 max-w-2xl",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed text-sm md:text-base",children:G||"No bio available. Write something to tell the world about yourself!"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-y-2 gap-x-6 mt-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"text-gray-400"}),e.jsxs("span",{children:["Joined ",new Date(K).toLocaleDateString("en-US",{month:"long",year:"numeric"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"text-gray-400"}),e.jsx("span",{children:"Earth"})]})]})]})]})]}),e.jsx("hr",{className:"my-6 border-gray-100"}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[e.jsx("div",{className:"flex gap-4",children:k.map(({key:s,Icon:t,color:a})=>B[s]?e.jsx("a",{href:B[s],target:"_blank",rel:"noopener noreferrer",className:`text-gray-400 transition-colors ${a}`,children:e.jsx(t,{size:20})},s):null)}),e.jsxs("div",{className:"flex gap-8 text-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-xl font-bold text-gray-900",children:W}),e.jsx("span",{className:"text-xs uppercase tracking-wider text-gray-500 font-medium",children:"Posts"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xl font-bold text-gray-900",children:q}),e.jsx("span",{className:"text-xs uppercase tracking-wider text-gray-500 font-medium",children:"Reads"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xl font-bold text-gray-900",children:L.length}),e.jsx("span",{className:"text-xs uppercase tracking-wider text-gray-500 font-medium",children:"Joined"})]})]})]})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 mt-8",children:[e.jsx("div",{className:"flex gap-8 border-b border-gray-200 mb-8 overflow-x-auto no-scrollbar",children:["posts","stories","communities"].map(t=>e.jsxs("button",{onClick:()=>S(t),className:"pb-3 text-sm font-bold uppercase tracking-wide whitespace-nowrap transition-colors relative "+(I===t?"text-black":"text-gray-400 hover:text-gray-600"),children:[t,I===t&&e.jsx(s.div,{layoutId:"activeTabIndicator",className:"absolute bottom-0 left-0 w-full h-0.5 bg-black"})]},t))}),e.jsxs(c,{mode:"wait",children:["posts"===I&&e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[C.length>0?C.map((s,a)=>{const l=C.length===a+1;return e.jsxs(t,{to:`/post/${s.blog_id}`,ref:l?R:null,className:"group bg-white rounded-xl overflow-hidden border border-gray-100 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"aspect-[16/9] overflow-hidden bg-gray-100 relative",children:[e.jsx("img",{src:s.banner||"/post-placeholder.jpg",alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),s.tags&&s.tags[0]&&e.jsx("span",{className:"absolute top-3 left-3 bg-black/60 backdrop-blur-sm text-white text-xs px-2 py-1 rounded",children:s.tags[0]})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2 line-clamp-2 group-hover:text-indigo-600 transition-colors",children:s.title}),e.jsx("p",{className:"text-gray-500 text-sm line-clamp-2 mb-4",children:s.des||"No description available."}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[e.jsx("span",{children:new Date(s.publishedAt).toLocaleDateString()}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"Read more"}),e.jsx("i",{className:"flaticon-right-arrow text-xs"})]})]})]})]},s.blog_id)}):e.jsxs("div",{className:"col-span-full py-20 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âœï¸"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"No posts yet"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"This user hasnâ€™t published any blogs."})]}),A&&e.jsx("div",{className:"col-span-full pt-8",children:e.jsx(w,{})})]},"posts"),"stories"===I&&e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:F.length>0?F.map(s=>e.jsxs("div",{className:"aspect-[9/16] relative bg-gray-900 rounded-xl overflow-hidden cursor-pointer group shadow-md hover:shadow-xl transition-all",onClick:()=>window.alert("Story viewer implementation pending"),children:[e.jsx("img",{src:s.banner||"/story-placeholder.jpg",alt:s.title,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent flex flex-col justify-end p-4",children:e.jsx("h4",{className:"text-white font-medium text-sm line-clamp-2",children:s.title})})]},s.story_id)):e.jsxs("div",{className:"col-span-full py-20 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“¸"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"No stories yet"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"This user hasnâ€™t posted any stories."})]})},"stories"),"communities"===I&&e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:L.length>0?L.map((s,t)=>e.jsx(N,{community:s},s._id||t)):e.jsxs("div",{className:"col-span-full py-20 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ‘¥"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"No communities"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"This user hasnâ€™t joined any communities yet."})]})},"communities")]})]})]})]})};export{_ as default};
